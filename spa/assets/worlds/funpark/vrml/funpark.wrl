#VRML V2.0 utf8
#hg 09/2001 VRML syntax fixes
EXTERNPROTO HUD[
 	field SFVec3f bboxSize 
	field SFVec3f bboxCenter 
	exposedField MFNode children 
	eventIn MFNode addChildren
	eventIn MFNode removeChildren
]
["/externprotos/nodes_xite.wrl#HUD"]

NavigationInfo
{
  avatarSize [0.25 1.75 0.75]
  visibilityLimit 0.0
  speed 4.0
  headlight FALSE
  type["WALK"]
}

#PROTO's = Tent Bridge Tree ParkBench Lamp FerrisWheel RideView FWSegment
#Shooting Gallery PROTO's =  Bullseye Gun Target SGMovingTarget TargetCounter  ShootingGallery
#Tags = mainRoot landscape pavillion island walls grass walks poolSign upDate gunGeometry
Inline{url"../../../no_cache/funpark/temp.wrl"}
PROTO SharedEvent [
field SFBool local FALSE
exposedField SFString   name    "event"  
exposedField SFString   type    "SFTime" 
eventIn SFBool  boolFromServer    eventIn SFColor colorFromServer
eventIn SFFloat floatFromServer   eventIn SFInt32 int32FromServer
eventIn SFRotation rotationFromServer 
eventIn SFString stringFromServer eventIn SFTime timeFromServer
eventIn SFVec2f vec2fFromServer   eventIn SFVec3f vec3fFromServer  
eventOut SFBool boolToServer      eventOut SFColor colorToServer  
eventOut SFFloat floatToServer    eventOut SFInt32 int32ToServer  
eventOut SFRotation rotationToServer  
eventOut SFString stringToServer  eventOut SFTime timeToServer  
eventOut SFVec2f vec2fToServer    eventOut SFVec3f vec3fToServer  
eventIn SFBool  set_bool    eventIn SFColor set_color  
eventIn SFFloat set_float   eventIn SFInt32 set_int32  
eventIn SFRotation set_rotation  
eventIn SFString set_string eventIn SFTime set_time  
eventIn SFVec2f set_vec2f   eventIn SFVec3f set_vec3f  
eventOut SFBool bool_changed     eventOut SFColor color_changed  
eventOut SFFloat float_changed   eventOut SFInt32 int32_changed  
eventOut SFRotation rotation_changed  
eventOut SFString string_changed eventOut SFTime  time_changed  
eventOut SFVec2f vec2f_changed   eventOut SFVec3f vec3f_changed  
]{ 
Script {
field SFBool local IS local 
#eventIn SFString set_name IS set_name  eventIn SFString set_type IS set_type eventOut SFString name_changed IS name_changed                                       eventOut SFString  type_changed IS type_changed
eventIn SFBool    boolFromServer      IS boolFromServer 
eventIn SFColor   colorFromServer     IS colorFromServer 
eventIn SFFloat   floatFromServer     IS floatFromServer 
eventIn SFInt32   int32FromServer     IS int32FromServer 
eventIn SFRotation rotationFromServer IS rotationFromServer 
eventIn SFString  stringFromServer    IS stringFromServer 
eventIn SFTime    timeFromServer      IS timeFromServer 
eventIn SFVec2f   vec2fFromServer     IS vec2fFromServer 
eventIn SFVec3f   vec3fFromServer     IS vec3fFromServer 
eventOut SFBool    boolToServer      IS boolToServer 
eventOut SFColor   colorToServer     IS colorToServer 
eventOut SFFloat   floatToServer     IS floatToServer 
eventOut SFInt32   int32ToServer     IS int32ToServer 
eventOut SFRotation rotationToServer IS rotationToServer 
eventOut SFString  stringToServer    IS stringToServer 
eventOut SFTime    timeToServer      IS timeToServer 
eventOut SFVec2f   vec2fToServer     IS vec2fToServer 
eventOut SFVec3f   vec3fToServer     IS vec3fToServer
eventIn SFBool    set_bool    IS set_bool 
eventIn SFColor   set_color   IS set_color 
eventIn SFFloat   set_float   IS set_float 
eventIn SFInt32   set_int32   IS set_int32 
eventIn SFRotation set_rotation IS set_rotation 
eventIn SFString  set_string  IS set_string 
eventIn SFTime    set_time    IS set_time 
eventIn SFVec2f   set_vec2f   IS set_vec2f 
eventIn SFVec3f   set_vec3f   IS set_vec3f
eventOut SFBool    bool_changed      IS bool_changed 
eventOut SFColor   color_changed     IS color_changed 
eventOut SFFloat   float_changed     IS float_changed 
eventOut SFInt32   int32_changed     IS int32_changed 
eventOut SFRotation rotation_changed IS rotation_changed 
eventOut SFString  string_changed    IS string_changed 
eventOut SFTime    time_changed      IS time_changed 
eventOut SFVec2f   vec2f_changed     IS vec2f_changed 
eventOut SFVec3f   vec3f_changed     IS vec3f_changed 
url "vrmlscript: 
function set_name(value, time) { name_changed = value; } 
function set_type(value, time) { type_changed = value; } 
function boolFromServer (value, time) { bool_changed = value; } 
function colorFromServer (value, time) { color_changed = value; } 
function floatFromServer (value, time) { float_changed = value; } 
function int32FromServer (value, time) { int32_changed = value; } 
function rotationFromServer (value, time) {rotation_changed = value; } 
function stringFromServer (value, time) { string_changed = value; } 
function timeFromServer (value, time) { time_changed = time; } 
function vec2fFromServer (value, time) { vec2f_changed = value; } 
function vec3fFromServer (value, time) { vec3f_changed = value; } 
function set_bool (value, time) {boolToServer = value;if(local){boolFromServer(value,time);}} 
function set_color (value, time) { colorToServer = value;if(local){colorFromServer(value,time);}} 
function set_float (value, time) {floatToServer = value; if(local){floatFromServer(value,time);}} 
function set_int32 (value, time) {int32ToServer = value; if(local){int32FromServer(value,time);}} 
function set_rotation (value, time) {rotationToServer = value;if(local){rotationFromServer(value,time);}} 
function set_string (value, time) {stringToServer = value;if(local){stringFromServer(value,time);}} 
function set_time (value, time) {timeToServer = value;if(local){timeFromServer(value,time);}} 
function set_vec2f (value, time) {vec2fToServer = value;if(local){vec2fFromServer(value,time);}} 
function set_vec3f (value, time) {vec3fToServer = value;if(local){vec3fFromServer(value,time);}} 
"}
}

PROTO BlaxxunZone [#PROTO supplied by BLAXXUN  
eventIn         MFNode   addEvents  
eventIn         MFNode   removeEvents  
eventIn         MFNode   addAvatars  
eventIn         MFNode   removeAvatars  
exposedField    MFNode   events [] 
exposedField    MFNode   avatars [] 
exposedField    SFString myAvatarURL "" 
exposedField    SFString myAvatarName ""
exposedField    SFFloat  number_avatars 0
eventOut        MFNode   avatars_added 
eventOut        MFNode   avatars_removed  
]{ 
Transform { 
addChildren IS addEvents 
removeChildren IS removeEvents 
children IS events 
} 
Transform { 
        addChildren IS addAvatars
        removeChildren IS removeAvatars 
        children IS avatars 
}
DEF avatarWatcher Script{#Script added by SpyglassVR
 eventIn MFNode addAvatars IS addAvatars
 eventIn MFNode removeAvatars IS removeAvatars
 eventOut MFNode avatars_added IS avatars_added
 eventOut MFNode avatars_removed IS avatars_removed
 field SFFloat number_avatars  IS number_avatars
url"vrmlscript:
        function addAvatars(v,t){
         avatars_added = v;
         number_avatars += 1;
        }
        function removeAvatars(v,t){
         avatars_removed = v;
         number_avatars -= 1;
        }

"}
 }# END BlaxxunZone

#PROTO CacheFooler[
#field MFString url []
#field MFString param []
#]{
#Group{
#children[
#DEF cf Inline{ url"" }
#DEF cs Script{ 
#field MFString thisUrl IS url
#field MFString param IS param
#eventOut MFString u_changed 
#url"vrmlscript:
# function initialize(){
#   paramString = new SFString();
#   if(param.length > 0){
#      for(i = 0; i < param.length ;i++ ){
#         paramString += ('&' + param[i]);
#      }
#   }
#   u_changed = new MFString(thisUrl[0]+'?fool='+Math.round(Math.random()*1000000)+paramString);
# }
#"}
#]}

#ROUTE cs.u_changed TO cf.set_url
#}#END CacheFooler


PROTO NarrowBridge[
exposedField SFVec3f position 0 0 0
exposedField SFVec3f scale 1 1 1
exposedField SFRotation rotation 0 1 0 0
]{Transform {scale IS scale translation IS position rotation IS rotation children [
LOD {range [300] level[
Group{children[
Shape {
appearance Appearance {texture ImageTexture{url "images/slat.gif"}textureTransform TextureTransform{scale 1 8 translation 0 0}}
geometry Extrusion{solid FALSE crossSection[0 2.25,0 -2.25]spine[100 0 0,80 3.25 0,55 5.55 0,20 6.85 0,-20 6.85 0,-55 5.55 0,-80 3.25 0,-100 0 0]}
}
Transform{ translation 0 0 2.25 children DEF bridgeRail Shape {
appearance Appearance {texture ImageTexture{url "images/rail.gif"}textureTransform TextureTransform{scale 30 1 rotation -1.571}}
geometry Extrusion{solid FALSE crossSection[0 0,-2 0]spine[100 0 0,80 3.25 0,55 5.55 0,20 6.85 0,-20 6.85 0,-55 5.55 0,-80 3.25 0,-100 0 0]}
}}
Transform{translation 0 0 -2.25 rotation 0 1 0 3.142 children USE bridgeRail}
]}
Group{}
]}#END LOD
]}

}#END NarrowBridge PROTO


PROTO Island[
field MFVec2f crossSection []
field MFVec3f spine [0 0 0,0 -30 0,0 -110 0]
field MFVec2f scale [1 1,.4 .4,.01 .01]
field SFVec2f texScale 3 3
]{Transform{children[
Shape {appearance Appearance {texture ImageTexture{url "images/dirt.jpg"}textureTransform TextureTransform{scale 6 1}}geometry Extrusion{beginCap FALSE crossSection IS crossSection spine IS spine scale IS scale}}
Shape {appearance Appearance {texture ImageTexture{url "images/floor.jpg"}textureTransform TextureTransform{scale IS texScale}}geometry DEF topSurface IndexedFaceSet {convex FALSE coord DEF topSurfaceCoords Coordinate {}}}
DEF islandScript Script{ field MFVec2f cross IS crossSection field SFNode top USE topSurface field SFNode topCoords USE topSurfaceCoords url"vrmlscript:function initialize(){theseCoords = new MFVec3f();thisIndex = new MFInt32();len = cross.length;for(i = 1;i <= len;i++){theseCoords[i-1] = new SFVec3f(cross[len-i][0]*-1,0,cross[len-i][1]);thisIndex[i-1] = new SFInt32(i-1);}thisIndex[i-1] = new SFInt32(-1);top.coordIndex = thisIndex;topCoords.point = theseCoords;}"}
]}}#END Island PROTO

PROTO Lamp[
field SFVec3f position 0 0 0
field SFRotation rotation 0 1 0 0
]{
DEF  lamp_ObjectPoints  Coordinate {
point [0.200000 -0.000500 -0.000000, 0.100000 -0.000500 -0.173205,-0.100000 -0.000500 -0.173205, -0.200000 -0.000500 -0.000000,-0.100000 -0.000500 0.173205, 0.100000 -0.000500 0.173205,0.144000 1.616500 -0.000000, 0.072000 1.616500 -0.124708,-0.072000 1.616500 -0.124708, -0.144000 1.616500 -0.000000,-0.072000 1.616500 0.124708, 0.072000 1.616500 0.124708,0.086265 1.616500 -0.000000, 0.043132 1.616500 0.074708,-0.043132 1.616500 0.074708, -0.086265 1.616500 -0.000000,-0.043132 1.616500 -0.074708, 0.043132 1.616500 -0.074708,0.086265 7.716500 -0.000000, 0.043132 7.716500 0.074708,
-0.043132 7.716500 0.074708, -0.086265 7.716500 -0.000000,-0.043132 7.716500 -0.074708, 0.043132 7.716500 -0.074708,0.000000 7.998000 1.800000, 0.043301 7.973000 1.800000,0.043301 7.923000 1.800000, 0.000000 7.898000 1.800000,-0.043301 7.923000 1.800000, -0.043301 7.973000 1.800000,0.000000 7.948267 1.295059, 0.043301 7.923748 1.299936,0.043301 7.874709 1.309691, 0.000000 7.850190 1.314568,-0.043301 7.874709 1.309691, -0.043301 7.923748 1.299936,0.000000 7.800982 0.809523, 0.043301 7.777885 0.819090,0.043301 7.731691 0.838224, 0.000000 7.708594 0.847791,-0.043301 7.731691 0.838224, -0.043301 7.777885 0.819090,
0.000000 7.561802 0.362050, 0.043301 7.541016 0.375939,0.043301 7.499443 0.403718, 0.000000 7.478656 0.417607,-0.043301 7.499443 0.403718, -0.043301 7.541016 0.375939,0.000000 7.239922 -0.030163, 0.043301 7.222244 -0.012485,0.043301 7.186889 0.022870, 0.000000 7.169211 0.040548,-0.043301 7.186889 0.022870, -0.043301 7.222244 -0.012485,0.000000 7.998000 1.850000, 0.212132 7.939421 1.850000,0.150000 7.939421 1.650000, 0.000000 7.939421 1.567157,-0.150000 7.939421 1.650000, -0.212132 7.939421 1.850000,-0.150000 7.939421 2.050000, -0.000000 7.939421 2.132843,
0.150000 7.939421 2.050000, 0.300000 7.798000 1.850000,0.212132 7.798000 1.567157, 0.000000 7.798000 1.450000,-0.212132 7.798000 1.567157, -0.300000 7.798000 1.850000,-0.212132 7.798000 2.132843, -0.000000 7.798000 2.250000,0.212132 7.798000 2.132843, 0.212132 7.656579 1.850000,0.150000 7.656579 1.650000, 0.000000 7.656579 1.567157,-0.150000 7.656579 1.650000, -0.212132 7.656579 1.850000,-0.150000 7.656579 2.050000, -0.000000 7.656579 2.132843,0.150000 7.656579 2.050000, 0.000000 7.598000 1.850000,
]}
DEF lamp Transform {translation IS position rotation IS rotation bboxCenter 0.000000  3.998750  1.038397 bboxSize 0.600000  7.998500  2.423205 children  [ 
LOD{range[70,180] level[
DEF lamp_ObjXForm  Transform  {  children [ 
DEF lampStand Shape {
geometry  IndexedFaceSet {creaseAngle 1.562070 convex FALSE ccw FALSE coord USE lamp_ObjectPoints coordIndex [17, 12, 18, 23,  -1,12, 13, 19, 18,  -1,13, 14, 20, 19,  -1,14, 15, 21, 20,  -1,15, 16, 22, 21,  -1,16, 17, 23, 22,  -1,18, 19, 20, 21, 22, 23,  -1,24, 25, 26, 27, 28, 29,  -1,30, 31, 25, 24,  -1,31, 32, 26, 25,  -1,32, 33, 27, 26,  -1,33, 34, 28, 27,  -1,34, 35, 29, 28,  -1,35, 30, 24, 29,  -1,36, 37, 31, 30,  -1,37, 38, 32, 31,  -1,38, 39, 33, 32,  -1,39, 40, 34, 33,  -1,40, 41, 35, 34,  -1,41, 36, 30, 35,  -1,42, 43, 37, 36,  -1,43, 44, 38, 37,  -1,44, 45, 39, 38,  -1,45, 46, 40, 39,  -1,46, 47, 41, 40,  -1,47, 42, 36, 41,  -1,48, 49, 43, 42,  -1,49, 50, 44, 43,  -1,50, 51, 45, 44,  -1,51, 52, 46, 45,  -1,52, 53, 47, 46,  -1,53, 48, 42, 47,  -1,48, 53, 52, 51, 50, 49,  -1,]}
appearance Appearance {material Material{ diffuseColor 0.9569 0.8392 0.6157 specularColor 0.9569 0.8392 0.6157 shininess 1}}
}
DEF lampBase Shape {
geometry  IndexedFaceSet {convex FALSE creaseAngle 1.562070 ccw FALSE coord USE lamp_ObjectPoints coordIndex [7, 6, 12, 17,  -1,6, 11, 13, 12,  -1,11, 10, 14, 13,  -1,10, 9, 15, 14,  -1,9, 8, 16, 15,  -1,8, 7, 17, 16,  -1,0, 1, 2, 3, 4, 5,  -1,6, 7, 1, 0,  -1,7, 8, 2, 1,  -1,8, 9, 3, 2,  -1,9, 10, 4, 3,  -1,10, 11, 5, 4,  -1,11, 6, 0, 5,  -1,]}
appearance Appearance  {material Material {diffuseColor 0.502 0.251 0 specularColor 0.502 0.251 0 shininess 0}}
}
Shape {
geometry  IndexedFaceSet {convex FALSE creaseAngle 1.562 ccw FALSE coord USE lamp_ObjectPoints coordIndex [54, 56, 55,  -1,54, 57, 56,  -1,54, 58, 57,  -1,54, 59, 58,  -1,54, 60, 59,  -1,54, 61, 60,  -1,54, 62, 61,  -1,54, 55, 62,  -1,63, 55, 56, 64,  -1,64, 56, 57, 65,  -1,65, 57, 58, 66,  -1,66, 58, 59, 67,  -1,67, 59, 60, 68,  -1,68, 60, 61, 69,  -1,69, 61, 62, 70,  -1,70, 62, 55, 63,  -1,]}
appearance Appearance{material  Material{diffuseColor 0.502 0.502 0.502 specularColor 0.502 0.502 0.502 shininess 0}}
}
Shape {
geometry  IndexedFaceSet {convex FALSE creaseAngle 1.562 ccw FALSE coord USE lamp_ObjectPoints coordIndex [71, 63, 64, 72,  -1,72, 64, 65, 73,  -1,73, 65, 66, 74,  -1,74, 66, 67, 75,  -1,75, 67, 68, 76,  -1,76, 68, 69, 77,  -1,77, 69, 70, 78,  -1,78, 70, 63, 71,  -1,79, 71, 72,  -1,79, 72, 73,  -1,79, 73, 74,  -1,79, 74, 75,  -1,79, 75, 76,  -1,79, 76, 77,  -1,79, 77, 78,  -1,79, 78, 71,  -1,]}
appearance Appearance{material  Material{diffuseColor 1 1 1 specularColor 1 1 1 shininess 0}}
}
]}
Group{children USE lampBase}
Group{}
]}#END LOD 
]}#END positioning Transform
}#END Lamp PROTO 

PROTO Tent[
exposedField SFVec3f position 0 0 0
exposedField SFVec3f scale 1 1 1
exposedField SFRotation rotation 0 1 0 0
]{
Transform{translation IS position rotation IS rotation scale IS scale children[
LOD{
range[100,200] level[
Group{ #First Level
children[
DEF tent Transform{ children[
Shape {
appearance Appearance {material Material {diffuseColor 1 1 1}}
geometry IndexedFaceSet {solid FALSE coord DEF tentCoord Coordinate {point [3.4 3 -4,3.4 3 4,2.52 3.9 -4,2.52 3.9  4,1.68 4.75 -3.75,1.68 4.75 3.75,.6 5.2 -3.5,.6 5.2 3.5,-.6 5.2 -3.5,-.6 5.2 3.5,-1.68 4.75 -3.75,-1.68 4.75 3.75,-2.52 3.9  -4,-2.52 3.9  4,-3.4 3 -4,-3.4 3 4,0 3 -4,0 3 4,3.2 3 -5,3.2 3 5,2.52 3.2 -5,2.52 3.2  5,1.68 3.4 -5,1.68 3.4 5,.6 3.5 -5.25,.6 3.5 5.25,-.6 3.5 -5.25,-.6 3.5 5.25,-1.68 3.4 -5,-1.68 3.4 5,-2.52 3.2  -5,-2.52 3.2  5,-3.2 3 -5,-3.2 3 5,0 3 -5,0 3 5,]}coordIndex [0,1,3,2,-1,4,5,7,6,-1,8,9,11,10,-1,12,13,15,14,-1,0,18,20,2,-1,4,22,24,6,-1,8,26,28,10,-1,12,30,32,14,-1,1,19,21,3,-1,5,23,25,7,-1,9,27,29,11,-1,13,31,33,15,-1]}}
Shape {
appearance Appearance {material Material {diffuseColor 1 0 0}}
geometry IndexedFaceSet {solid FALSE coord USE tentCoord coordIndex [2,3,5,4,-1,6,7,9,8,-1,10,11,13,12,-1,2,20,22,4,-1,6,24,26,8,-1,10,28,30,12,-1,3,21,23,5,-1,7,25,27,9,-1,11,29,31,13,-1,]}}
]}
Transform{ translation 2.8 0 4.5 rotation 1 0 -1 .2 children[
DEF pole Group{ children[
Shape{appearance Appearance{material DEF steel Material {ambientIntensity  .3 diffuseColor .36 .38 .33 specularColor 1 1 1 emissiveColor 0 0 0.1 shininess .1}}geometry Cylinder{radius .05 height 7}}
Transform{translation 0 3.5 0 children Shape{appearance Appearance{material USE steel}geometry Sphere{radius .15}}}
]}#END pole
DEF wires Shape{
appearance Appearance{material Material{diffuseColor 0 0 0}}
geometry IndexedLineSet{coord Coordinate{point[0 3 0,2 0 1,1 0 2]}coordIndex[1,0,2,-1]}}
]}
Transform{translation -2.8 0 4.5 rotation 1 0 1 .2 children[USE pole Transform{rotation 0 1 0 -1.571 children USE wires}]}
Transform{translation -2.8 0 -4.5 rotation -1 0 1 .2 children[USE pole Transform{rotation 0 1 0 3.142 children USE wires}]}
Transform{translation 2.8 0 -4.5 rotation -1 0 -1 .2 children[USE pole Transform{rotation 0 1 0 1.571 children USE wires}]}
]}#END First Level
Group{children USE tent}
Group{}
]}#END LOD
]}#END positioning Transform
}#END Tent PROTO

PROTO Bridge[
exposedField SFVec3f position 0 0 0
exposedField SFVec3f scale 1 1 1
exposedField SFRotation rotation 0 1 0 0
]{
Transform {scale IS scale translation IS position rotation IS rotation children [
Shape {
appearance Appearance {texture ImageTexture{url "images/tile.jpg"}textureTransform TextureTransform{scale 1 6 translation 0 0}}
geometry Extrusion{solid FALSE crossSection[0 11.25,0 -11.25]spine[100 0 0,80 3.25 0,55 5.55 0,20 6.85 0,-20 6.85 0,-55 5.55 0,-80 3.25 0,-100 0 0]}
}
Transform{
translation 0 0 11.25
children DEF bridgeRail Shape {
appearance Appearance {texture ImageTexture{url "images/stone.gif"}textureTransform TextureTransform{scale 10 1 rotation -1.571}}
geometry Extrusion{crossSection[0 0,-1.5 -.5,-1.5 0,0 0]spine[100 0 0,80 3.25 0,55 5.55 0,20 6.85 0,-20 6.85 0,-55 5.55 0,-80 3.25 0,-100 0 0]}
}}
Transform{translation 0 0 -11.25 rotation 0 1 0 3.142 children USE bridgeRail}
]}
}#END Bridge PROTO

PROTO Tree[
field SFVec3f position 0 0 0
field SFRotation rotation 0 1 0 0
field SFVec3f scale 1 1 1
]{

Transform{translation IS position rotation IS rotation scale IS scale children[
LOD{range [80,170]level[
Transform{
scale 8 6 8
children [ 
Shape {
appearance Appearance {material Material {specularColor .4 .1 0}
texture PixelTexture{
image 1 90 3 
0x000000 0x221100 0x441100 0x000000 0x221100 0x441100 0x000000 0x221100 0x441100
0x000000 0x221100 0x441100 0x000000 0x221100 0x441100 0x000000 0x221100 0x441100
0x000000 0x221100 0x441100 0x000000 0x221100 0x441100 0x000000 0x221100 0x441100
0x000000 0x221100 0x441100 0x000000 0x221100 0x441100 0x000000 0x221100 0x441100
0x000000 0x221100 0x441100 0x000000 0x221100 0x441100 0x000000 0x221100 0x441100
0x000000 0x221100 0x441100 0x000000 0x221100 0x441100 0x000000 0x221100 0x441100
0x000000 0x221100 0x441100 0x000000 0x221100 0x441100 0x000000 0x221100 0x441100
0x000000 0x221100 0x441100 0x000000 0x221100 0x441100 0x000000 0x221100 0x441100
0x000000 0x221100 0x441100 0x000000 0x221100 0x441100 0x000000 0x221100 0x441100
0x000000 0x221100 0x441100 0x000000 0x221100 0x441100 0x000000 0x221100 0x441100
}textureTransform TextureTransform{scale 1 3}}
geometry DEF treeTrunk IndexedFaceSet {
creaseAngle 3
ccw FALSE
coord Coordinate {
point [.187 .937 -.226,.252 1.111 -.158,.225 .938 -.195,.282 1.098 -.156,.288 1.107 -.186,.238 .923 -.235,.151 1.071 -.335,.197 .924 -.257,.118 1.054 -.35,.102 1.066 -.319,.211 .994 -.24,.256 1.112 -.186,.13 1.078 -.314,.103 1.156 -.39,.083 1.138 -.399,.069 1.151 -.388,.09 1.162 -.376,-.078 1.277 -.536,-.086 1.408 -.246,.297 1.425 -.384,.186 1.396 -.629,.384 1.227 -.112,.398 1.22 -.11,.254 1.249 -.28,.258 1.242 -.291,.275 1.238 -.289,.269 1.137 -.17,.398 1.231 -.128,.535 1.358 -.098,.42 1.296 -.24,.387 1.233 -.125,.273 1.375 -.122,
.433 1.326 .06,.315 1.251 -.426,.101 1.325 -.361,.273 1.254 -.278,.428 1.386 -.289,.214 1.425 -.149,.137 .226 .029,.137 .228 -.058,.14 .042 -.048,.054 .228 -.085,-.005 .232 -.014,.025 .042 -.082,.054 .226 .056,-.068 .047 .015,.156 .042 .088,.009 -.009 -.2,.126 -.009 -.077,-.072 -.009 -.066,.008 -.009 .187,-.029 -.009 .094,.026 .042 .112,.131 -.009 .121,.259 -.009 -.035,-.147 -.009 .065,.085 .603 .006,.007 .63 -.02,-.101 .598 .057,.007 .633 .122,.085 .596 .062,.328 .817 .112,.216 .768 .041,.329 .785 .139,
.311 .785 .176,.287 .822 .196,-.175 .745 .006,-.203 .726 .086,-.13 .752 .088,-.003 .701 .015,.285 .831 .143,.104 .741 .05,.356 .914 .191,.364 .894 .203,.352 .886 .236,.328 .898 .26,.322 .924 .226,-.247 .897 .04,-.243 .902 .105,-.207 .906 .107,-.185 .932 .06,.188 .85 -.119,.23 .859 -.092,.179 .783 .077,.239 .826 -.128,.207 .812 -.152,.172 .708 .017,-.161 1.084 .026,-.166 1.071 -.004,-.197 1.079 -.003,-.309 1.039 .165,-.315 1.021 .201,-.282 1.034 .209,-.228 .965 .084,-.19 1.084 .028,-.284 1.046 .181,
-.125 .78 .035,-.353 1.122 .225,-.357 1.103 .246,-.343 1.117 .257,-.336 1.129 .235,-.456 1.239 .436,-.176 1.378 .376,-.4 1.391 .036,-.611 1.355 .201,-.15 1.198 -.112,-.152 1.191 -.126,-.284 1.218 .054,-.295 1.211 .052,-.298 1.207 .035,-.178 1.106 .012,-.169 1.201 -.123,-.176 1.331 -.262,-.285 1.221 -.132,-.164 1.204 -.112,-.139 1.348 -.002,.002 1.301 -.2,-.44 1.216 .028,-.329 1.292 .221,-.287 1.223 .035,-.337 1.355 -.113,-.152 1.398 .062,.238 1.073 .264,.234 1.092 .247,.243 1.076 .231,.51 .985 .188,.521 .975 .203,.514 .973 .213,
.376 .95 .479,.35 .912 .233,.498 .993 .198,.255 1.078 .246,.205 1.195 .147,.168 1.125 .352,.24 1.086 .249,.653 1.074 .258,.665 1.063 .26,.533 1.128 .09,.535 1.115 .082,.551 1.121 .088,.52 1.004 .199,.668 1.074 .249,.833 1.146 .296,.706 1.132 .13,.658 1.079 .246,.584 1.245 .248,.726 1.157 .43,.592 1.115 -.056,.405 1.24 .01,.553 1.128 .092,.736 1.217 .081,.54 1.308 .221]
}
coordIndex [138,125,139,-1,144,135,140,-1,140,141,144,-1,137,149,140,-1,139,140,149,-1,136,141,126,-1,135,136,127,-1,75,131,129,-1,124,129,131,-1,72,130,129,-1,127,129,130,-1,127,73,74,-1,126,125,73,-1,124,76,72,-1,123,122,76,-1,114,105,110,-1,110,111,114,-1,107,119,110,-1,109,110,119,-1,109,94,89,-1,108,107,94,-1,106,111,89,-1,105,106,88,-1,95,97,90,-1,92,100,95,-1,98,99,92,-1,97,98,91,-1,78,92,79,-1,90,91,78,-1,80,89,77,-1,87,88,80,-1,85,0,81,-1,
2,5,84,-1,72,70,61,-1,76,65,70,-1,74,73,64,-1,73,61,63,-1,62,70,83,-1,96,66,69,-1,64,63,60,-1,38,56,39,-1,56,57,41,-1,42,45,43,-1,41,43,40,-1,38,40,46,-1,30,21,26,-1,26,27,30,-1,23,35,26,-1,25,26,35,-1,25,11,4,-1,24,23,11,-1,22,27,4,-1,21,22,3,-1,12,13,6,-1,9,16,12,-1,14,15,9,-1,13,14,8,-1,7,9,0,-1,6,8,7,-1,2,4,5,-1,1,3,2,-1,130,125,138,-1,137,151,149,-1,149,150,139,-1,
148,137,138,-1,147,138,139,-1,135,146,136,-1,145,135,144,-1,143,144,141,-1,136,142,141,-1,135,130,140,-1,126,141,140,-1,130,137,140,-1,139,126,140,-1,126,139,125,-1,137,130,138,-1,127,136,126,-1,130,135,127,-1,44,52,45,-1,44,46,52,-1,38,44,59,-1,58,59,44,-1,58,68,59,-1,96,69,68,-1,65,75,64,-1,59,65,60,-1,84,62,83,-1,82,83,71,-1,82,81,0,-1,7,85,84,-1,74,128,129,-1,123,132,134,-1,132,131,134,-1,131,133,134,-1,133,123,134,-1,122,133,131,-1,
123,133,122,-1,132,124,131,-1,132,123,124,-1,75,122,131,-1,124,72,129,-1,72,125,130,-1,127,74,129,-1,128,75,129,-1,128,74,75,-1,126,73,127,-1,125,72,73,-1,123,76,124,-1,122,75,76,-1,107,121,119,-1,119,120,109,-1,118,107,108,-1,117,108,109,-1,105,116,106,-1,115,105,114,-1,113,114,111,-1,106,112,111,-1,105,87,110,-1,89,111,110,-1,87,107,110,-1,109,89,110,-1,108,94,109,-1,107,87,94,-1,88,106,89,-1,87,105,88,-1,97,104,98,-1,100,103,97,-1,99,102,100,-1,
98,101,99,-1,95,100,97,-1,92,99,100,-1,91,98,92,-1,90,97,91,-1,58,42,41,-1,66,96,80,-1,83,65,59,-1,59,71,83,-1,83,70,65,-1,80,96,68,-1,58,57,66,-1,68,67,78,-1,92,95,79,-1,93,95,77,-1,89,94,77,-1,93,94,79,-1,93,79,95,-1,90,77,95,-1,87,79,94,-1,93,77,94,-1,78,91,92,-1,77,90,78,-1,80,88,89,-1,79,87,80,-1,62,85,86,-1,85,81,71,-1,67,66,77,-1,57,86,71,-1,86,63,62,-1,56,63,86,-1,57,56,86,-1,
85,7,0,-1,84,5,7,-1,82,2,84,-1,0,2,82,-1,86,85,71,-1,62,84,85,-1,83,82,84,-1,71,81,82,-1,71,69,57,-1,80,77,66,-1,68,79,80,-1,78,79,68,-1,77,78,67,-1,76,70,72,-1,75,65,76,-1,74,64,75,-1,73,63,64,-1,72,61,73,-1,59,69,71,-1,62,61,70,-1,59,68,69,-1,66,57,69,-1,58,67,68,-1,66,67,58,-1,64,60,65,-1,63,56,60,-1,61,62,63,-1,38,60,56,-1,59,60,38,-1,42,58,44,-1,41,57,58,-1,39,56,41,-1,
40,54,46,-1,53,46,54,-1,40,43,48,-1,46,53,52,-1,43,45,49,-1,55,49,45,-1,52,51,45,-1,55,45,51,-1,48,54,40,-1,50,52,53,-1,50,51,52,-1,47,43,49,-1,47,48,43,-1,44,38,46,-1,42,44,45,-1,41,42,43,-1,39,41,40,-1,38,39,40,-1,23,37,35,-1,35,36,25,-1,34,23,24,-1,33,24,25,-1,21,32,22,-1,31,21,30,-1,29,30,27,-1,22,28,27,-1,21,1,26,-1,4,27,26,-1,1,23,26,-1,25,4,26,-1,24,11,25,-1,23,1,11,-1,
3,22,4,-1,1,21,3,-1,13,20,14,-1,16,19,13,-1,15,18,16,-1,14,17,15,-1,12,16,13,-1,9,15,16,-1,8,14,9,-1,6,13,8,-1,9,12,0,-1,10,12,5,-1,4,11,5,-1,10,11,0,-1,10,0,12,-1,6,5,12,-1,1,0,11,-1,10,5,11,-1,7,8,9,-1,5,6,7,-1,2,3,4,-1,0,1,2,-1]
}}
Transform{ translation -.45 1.4 .2 
children DEF leaf Shape {
appearance Appearance {material Material {specularColor .5 .5 .1 ambientIntensity .1}texture ImageTexture{url"images/clover.gif"}textureTransform TextureTransform{scale 2 2}}
geometry DEF leafForm IndexedFaceSet {creaseAngle 3 solid FALSE
coord Coordinate {point [-.188 .05 -.118,-.336 -.225 -.206,-.246 -.056 -.016,-.184 .05 -.016,-.231 .05 .064,-.408 -.225 .096,-.229 -.056 .191,-.162 .05 .135,-.161 .05 .269,-.291 -.225 .438,0 -.056 .264,.006 .05 .219,.138 .05 .279,.208 -.225 .455,.219 -.056 .107,.18 .05 .107,.316 .05 .047,.504 -.225 .068,.213 -.056 -.15,.157 .05 -.128,.064 .05 -.249,.084 -.225 -.425,-.033 -.056 -.15,-.039 .05 -.128,.034 .257 .015]}
coordIndex [24,23,0,-1,24,20,23,-1,24,19,20,-1,24,16,19,-1,24,15,16,-1,24,12,15,-1,24,11,12,-1,24,8,11,-1,24,7,8,-1,24,4,7,-1,24,3,4,-1,24,0,3,-1,0,22,1,-1,23,22,0,-1,23,20,22,-1,20,21,22,-1,20,18,21,-1,19,18,20,-1,19,16,18,-1,16,17,18,-1,16,14,17,-1,15,14,16,-1,15,12,14,-1,12,13,14,-1,12,10,13,-1,11,10,12,-1,11,8,10,-1,8,9,10,-1,8,6,9,-1,7,6,8,-1,7,4,6,-1,4,5,6,-1,4,2,5,-1,3,2,4,-1,3,0,2,-1,0,1,2,-1,]
}}
}#END Transform
Transform{translation -.2 1.3 0 scale 1 .8 1 children USE leaf}
Transform{translation .05 1.35 -.5 scale 1 1.2 1 children USE leaf}
Transform{translation .45 1.4 -.2 scale 1 .8 1 children USE leaf}
Transform{translation .65 1.2 .2 scale 1.2 1.35 1 children USE leaf}
Transform{translation .2 1.1 .2 scale .6 .6 .6 children USE leaf}
DEF shadow Shape{
appearance Appearance{material Material{transparency .7 diffuseColor 0 0 0}}
geometry Cylinder{ side FALSE bottom FALSE radius 0.5625 height .01}}  
]}#END GROUP1
,
Transform{scale 8 6 8 children [
Shape {
appearance Appearance {
material Material {diffuseColor .1 .05 0.025 specularColor .3 .1 0}}
geometry USE treeTrunk
}
Transform{translation -.45 1.4 .2 
children DEF leaf2 Shape {
appearance Appearance {material Material {diffuseColor 0 .2 0 specularColor .5 .5 .1 ambientIntensity .1}}
geometry USE leafForm
}
}#END Transform
Transform{
translation -.2 1.3 0 scale 1 .8 1 children USE leaf2}
Transform{translation .05 1.35 -.5 scale 1 1.2 1 children USE leaf2}
Transform{translation .45 1.4 -.2 scale 1 .8 1 children USE leaf2}
Transform{translation .65 1.2 .2 scale 1.2 1.35 1 children USE leaf2}
Transform{translation .2 1.1 .2 scale .6 .6 .6 children USE leaf2}
]}#END Group2
,
Group{}
]}#END LOD 
]}#END positioning Transform
}#END Tree PROTO

PROTO ParkBench[
field SFVec3f position 0 0 0
field SFRotation rotation 0 1 0 0
]{
Transform{rotation IS rotation translation IS position children[  
LOD{range[50,180] level[
Group{ children[ #GROUP1
DEF slats Group{ children[
DEF Box01-ROOT Transform {translation -0.004054 0.5236 0.2862 children [
Transform {translation 0 0.01502 0 children [
Shape {
appearance Appearance {material Material {diffuseColor 0.7216 0.6078 0.898}}
geometry Box { size 3.323 0.03005  0.2202 }
}]}]}
DEF Box02-ROOT Transform {translation -0.004054 0.5236 -0.04697 children [
Transform {translation 0 0.01502 0 children [
Shape {
appearance Appearance {material Material {diffuseColor 0.7216 0.6078 0.898}}
geometry Box { size 3.323 0.03005  0.2202 }
}]}]}
DEF Box03-ROOT Transform {translation -0.004054 1.018 -0.3665 rotation -1 0 0 -1.318 children [
Transform {translation 0 0.01502 0 children [
Shape {
appearance Appearance {material Material {diffuseColor 0.7216 0.6078 0.898}}
geometry Box { size 3.323 0.03005  0.2202 }
}]}]}
DEF Box04-ROOT Transform {translation -0.004054 0.6956 -0.283 rotation -1 0 0 -1.318 children [
Transform {translation 0 0.01502 0 children [
Shape {
appearance Appearance {material Material {diffuseColor 0.7216 0.6078 0.898}}
geometry Box { size 3.323 0.03005  0.2202 }
}]}]}]}#END slats Group
DEF LEG_______-ROOT Transform {translation 0 0 0 children [
Shape {
appearance Appearance {material Material {diffuseColor 0.7843 0.7843 0.7843 shininess 0}}
geometry DEF LEG_______-FACES IndexedFaceSet {ccw TRUE solid TRUE
coord DEF LEG_______-COORD Coordinate { point [0.0345 0.005547 0.3657, 0.0345 0 0.345, -0.0345 0 0.345, -0.0345 0.005547 0.3657, 0.0345 0 -0.345, -0.0345 0 -0.345, 0.0345 0.005547 -0.3657, -0.0345 0.005547 -0.3657, 0.0345 0.0207 -0.3809, -0.0345 0.0207 -0.3809, 0.0345 0.0414 -0.3864, -0.0345 0.0414 -0.3864, -0.0345 0.0621 -0.3809, 0.0345 0.4899 -0.1601, -0.0345 0.4899 -0.1601, 0.0345 0.5051 -0.1449, -0.0345 0.5051 -0.1449, 0.0345 0.5106 -0.1242, -0.0345 0.5106 -0.1242, 0.0345 0.5029 -0.1205, 0.0345 0.4976 -0.1406, -0.0345 0.4976 -0.1406, -0.0345 0.5029 -0.1205, 
0.0345 0.4829 -0.1553, -0.0345 0.4829 -0.1553, 0.0345 0.0679 -0.3694, -0.0345 0.0679 -0.3694, 0.0345 0.04782 -0.3748, -0.0345 0.04782 -0.3748, 0.0345 0.02774 -0.3694, -0.0345 0.02774 -0.3694, 0.0345 0.01304 -0.3547, -0.0345 0.01304 -0.3547, 0.0345 0.007659 -0.3347, -0.0345 0.007659 -0.3347, 0.0345 0.007659 0.3347, -0.0345 0.007659 0.3347, 0.0345 0.01304 0.3547, -0.0345 0.01304 0.3547, 0.0345 0.02774 0.3694, -0.0345 0.02774 0.3694, 0.0345 0.04782 0.3748, -0.0345 0.04782 0.3748, 0.0345 0.4628 0.3748, -0.0345 0.4628 0.3748, 0.0345 0.4829 0.3694, -0.0345 0.4829 0.3694, 0.0345 0.4976 0.3547, -0.0345 0.4976 0.3547, 0.0345 0.5029 0.3347, -0.0345 0.5029 0.3347, 0.0345 0.5106 0.345, -0.0345 0.5106 0.345, 0.0345 0.5051 0.3657, -0.0345 0.5051 0.3657, 0.0345 0.4899 0.3809, -0.0345 0.4899 0.3809, 0.0345 0.4692 0.3864, -0.0345 0.4692 0.3864, 0.0345 0.0414 0.3864, -0.0345 0.0414 0.3864, 0.0345 0.0207 0.3809, -0.0345 0.0207 0.3809]}
coordIndex [0, 1, 2, -1, 0, 2, 3, -1, 1, 4, 5, -1, 1, 5, 2, -1, 4, 6, 7, -1, 4, 7, 5, -1, 6, 8, 9, -1, 6, 9, 7, -1, 8, 10, 11, -1, 8, 11, 9, -1, 10, 12, 11, -1, 10, 13, 14, -1, 10, 14, 12, -1, 13, 15, 16, -1, 13, 16, 14, -1, 15, 17, 18, -1, 15, 18, 16, -1, 19, 20, 21, -1, 19, 21, 22, -1, 20, 23, 24, -1, 20, 24, 21, -1, 23, 25, 26, -1, 23, 26, 24, -1, 25, 27, 28, -1, 25, 28, 26, -1, 27, 29, 30, -1, 27, 30, 28, -1, 29, 31, 32, -1, 29, 32, 30, -1, 31, 33, 34, -1, 31, 34, 32, -1, 33, 35, 36, -1, 33, 36, 34, -1, 35, 37, 38, -1, 35, 38, 36, -1, 37, 39, 40, -1, 37, 40, 38, -1, 39, 41, 42, -1, 39, 42, 40, -1, 41, 43, 44, -1, 41, 44, 42, -1, 43, 45, 46, -1, 43, 46, 44, -1, 45, 47, 48, -1, 45, 48, 46, -1, 47, 49, 50, -1, 47, 50, 48, -1, 49, 19, 22, -1, 49, 22, 50, -1, 17, 51, 52, -1, 17, 52, 18, -1, 51, 53, 54, -1, 51, 54, 52, -1, 53, 55, 56, -1, 53, 56, 54, -1, 
55, 57, 58, -1, 55, 58, 56, -1, 57, 59, 60, -1, 57, 60, 58, -1, 59, 61, 62, -1, 59, 62, 60, -1, 61, 0, 3, -1, 61, 3, 62, -1, 2, 5, 7, -1, 7, 9, 11, -1, 7, 11, 12, -1, 12, 14, 16, -1, 16, 18, 22, -1, 16, 22, 21, -1, 16, 21, 24, -1, 16, 24, 26, -1, 50, 22, 18, -1, 50, 18, 52, -1, 50, 52, 54, -1, 54, 56, 58, -1, 58, 60, 62, -1, 62, 3, 2, -1, 12, 16, 26, -1, 12, 26, 28, -1, 12, 28, 30, -1, 48, 50, 54, -1, 48, 54, 58, -1, 7, 12, 30, -1, 7, 30, 32, -1, 7, 32, 34, -1, 7, 34, 36, -1, 46, 48, 58, -1, 2, 7, 36, -1, 2, 36, 38, -1, 2, 38, 40, -1, 44, 46, 58, -1, 44, 58, 62, -1, 62, 2, 40, -1, 62, 40, 42, -1, 62, 42, 44, -1, 1, 0, 61, -1, 1, 61, 59, -1, 59, 57, 55, -1, 55, 53, 51, -1, 51, 17, 19, -1, 51, 19, 49, -1, 51, 49, 47, -1, 51, 47, 45, -1, 20, 19, 17, -1, 20, 17, 15, -1, 20, 15, 13, -1, 10, 8, 6, -1, 10, 6, 4, -1, 55, 51, 45, -1, 55, 45, 43, -1, 55, 43, 41, -1, 23, 20, 13, -1, 23, 13, 10, -1, 59, 55, 41, -1, 59, 41, 39, -1, 59, 39, 37, -1, 25, 23, 10, -1, 1, 59, 37, -1, 1, 37, 35, -1, 1, 35, 33, -1, 27, 25, 10, -1, 4, 1, 33, -1, 4, 33, 31, -1, 4, 31, 29, -1, 29, 27, 10, -1, 29, 10, 4, -1]
}}]}
Transform {translation -1.4 0.0 0.0 children USE LEG_______-ROOT}
Transform {translation 1.4 0.0 0.0 children USE LEG_______-ROOT}
]}#GROUP1
Group{children USE slats}
Group{}
]}#END LOD
]}#END positioning Transform                
}#END ParkBench PROTO

#!!!!!!!!!!!!!!BEGIN Shooting Gallery
PROTO Bullseye[
field SFImage image 1 4 3 0xFF0000 0x000000 0xFF0000 0x000000
]{
Shape {
appearance Appearance {texture PixelTexture{image IS image}}
geometry DEF circle IndexedFaceSet {solid FALSE coord Coordinate{point[0 .15 0,-.11 .1 0,-.15 0 0,-.11 -.1 0,0 -.15 0,.11 -.1 0,.15 0 0,.11 .1 0,0 0 0]}coordIndex[0,1,8,-1,1,2,8,-1,2,3,8,-1,3,4,8,-1,4,5,8,-1,5,6,8,-1,6,7,8,-1,7,0,8,-1]texCoord TextureCoordinate{point[1 1,0 1,.5 0]}texCoordIndex[0,1,2,-1,0,1,2,-1,0,1,2,-1,0,1,2,-1,0,1,2,-1,0,1,2,-1,0,1,2,-1,0,1,2,-1] }
}
}#END Bullseye

PROTO TargetCounter[
eventIn SFBool set_isHit
field SFFloat numHits 4
field SFTime interval 4
field MFString hitUrl ""
field SFFloat point_value 10
eventOut SFFloat point_scored
eventOut SFBool reset
]{
Group{
children[
DEF thisScript Script{
eventIn SFBool isHit IS set_isHit
eventIn SFBool isActive
field SFBool isRunning FALSE
field SFFloat curHits 0
field SFFloat numHits IS numHits
field SFFloat point_value IS point_value
eventOut SFFloat point_scored IS point_scored
eventOut SFBool reset IS reset
eventOut SFTime start
eventOut SFTime hit_time
url"vrmlscript:
 function isHit(v,t){
  if(!v){return;}
  else{
   if(!isRunning){
    start = t;
    isRunning = true;
   }
   curHits += 1;
   if(curHits == numHits){
    point_scored = point_value;
    hit_time = t;
   }
  }
 }
 function isActive(v,t){
  if(v){return;}
   isRunning = false;
   reset = true;
   curHits =0;
 }
"}
DEF clock TimeSensor{cycleInterval IS interval enabled TRUE loop FALSE}
Sound {intensity 1 direction 1 1 1 maxBack 100 maxFront 100 minBack 10 minFront 10 spatialize TRUE source DEF thisSound AudioClip {pitch 1 loop FALSE url IS hitUrl}}
]}
ROUTE thisScript.start TO clock.set_startTime
ROUTE clock.isActive TO thisScript.isActive
ROUTE thisScript.hit_time TO thisSound.set_startTime 
}#END TargetCounter

PROTO Target[
eventIn SFVec3f hitPoint
eventIn SFBool reset
exposedField SFVec3f translation 0 0 0
exposedField SFRotation rotation 0 1 0 0
exposedField SFFloat Z 0
field MFNode children[]
field MFString hitUrl ""
field SFFloat point_value 1
eventOut SFBool isHit
eventOut SFTime hitTime
eventOut SFFloat point_scored
]{
DEF root Transform{children[
Transform{translation IS translation rotation IS rotation children[
DEF target Transform{children IS children}
Sound {intensity 1 direction 1 1 1 maxBack 100 maxFront 100 minBack 10 minFront 10 spatialize TRUE source DEF bellSound AudioClip {pitch 1 loop FALSE url IS hitUrl}}
]}
DEF hitClock TimeSensor{ cycleInterval .25 loop FALSE enabled TRUE}
DEF hitMove OrientationInterpolator{ key[0,1] keyValue[1 0 0 0,1 0 0 1.571]}
DEF targetScript Script{
eventIn SFBool reset IS reset
eventIn SFVec3f set_hitPoint IS hitPoint
field SFFloat Z IS Z
field SFBool isHit IS isHit
field SFFloat point_value IS point_value
eventOut SFRotation rotation_changed
eventOut SFRotation rotation_reset
eventOut SFTime hitTime IS hitTime
eventOut SFFloat point_scored IS point_scored
url"vrmlscript:
function set_hitPoint(v,t){
  if(Z < (v[2]-.0001) || Z > (v[2]+.0001)){return;} 
  hitTime = t;
  point_scored = point_value; 
  isHit = true;  
}
function reset(v){
  if(!v){return;}
  isHit = false;
  rotation_reset = new SFRotation(1,0,0,0);
}
function initialize(){reset(true);}
"}
]}#END root
ROUTE targetScript.hitTime TO bellSound.set_startTime
ROUTE targetScript.hitTime TO hitClock.set_startTime
        ROUTE hitClock.fraction_changed TO hitMove.set_fraction
                ROUTE hitMove.value_changed TO target.set_rotation
ROUTE targetScript.rotation_reset TO target.set_rotation
}#END target

PROTO SGMovingTarget[          
eventIn SFVec3f hitPoint
eventIn SFBool reset
exposedField SFBool isHit FALSE
exposedField SFTime cycleInterval 3
exposedField SFBool enabled FALSE
exposedField SFTime startTime 0
field SFVec3f translation 0 0 0
field SFRotation rotation 0 1 0 0
field MFVec3f interpolation [-1 0 1,1 0 1]
field MFRotation direction [0 1 0 0,0 1 0 3.142]
field SFFloat Zoffset 0
field SFFloat Z 0
field MFNode children[]
field MFString hitUrl ""
field SFFloat point_value 1
eventOut SFTime hitTime
eventOut SFFloat point_scored 
]{
DEF root Transform{
children[
Transform{translation IS translation rotation IS rotation children[
DEF thisTarget Target{children IS children hitPoint IS hitPoint reset IS reset point_value IS point_value point_scored IS point_scored hitTime IS hitTime hitUrl IS hitUrl Z IS Z}
]}
DEF forwardClock TimeSensor{ cycleInterval IS cycleInterval loop FALSE  startTime IS startTime}
DEF backwardClock TimeSensor{cycleInterval IS cycleInterval loop FALSE}
DEF forward PositionInterpolator{key [0,1] keyValue IS interpolation}
DEF backward PositionInterpolator{key [0,1] keyValue []}
DEF movingTargetScript Script{
eventIn SFBool forward
eventIn SFBool backward
eventIn SFBool set_isHit
eventIn SFBool reset IS reset 
field MFVec3f interpolation IS interpolation
field MFRotation direction IS direction
field SFBool enabled IS enabled
field SFBool isHit FALSE
field SFBool isF TRUE
field SFFloat Zoffset IS Zoffset
eventOut SFFloat Z IS Z
eventOut MFVec3f value_changed
eventOut SFTime forwardTime
eventOut SFTime backwardTime
eventOut SFRotation rotation_changed
url"vrmlscript:
function forward(v,t){
  if(v || !enabled || isHit){return;}
  isF = true;
  forwardTime = t;
  //rotation_changed = direction[0];
}
function backward(v,t){
  if(v || !enabled || isHit){return;}
  isF = false;
  backwardTime = t;
  //rotation_changed = direction[1];
}
function initialize(){
  value_changed = new MFVec3f(interpolation[1],interpolation[0]);
  if(enabled){forward(false,Browser.getTime());}
}
function set_isHit(v,t){
  isHit = v;
}
function reset(v,t){
  if(!v){return;}
  enabled = true;
  isHit = false;
  forward(false,Browser.getTime());
}
"}
]}#END root
ROUTE movingTargetScript.value_changed TO backward.set_keyValue
ROUTE movingTargetScript.forwardTime TO forwardClock.set_startTime
        ROUTE forwardClock.fraction_changed TO forward.set_fraction
                ROUTE forward.value_changed TO thisTarget.set_translation
ROUTE movingTargetScript.backwardTime TO backwardClock.set_startTime
        ROUTE backwardClock.fraction_changed TO backward.set_fraction
                ROUTE backward.value_changed TO thisTarget.set_translation
ROUTE movingTargetScript.rotation_changed TO thisTarget.set_rotation 
ROUTE forwardClock.isActive TO movingTargetScript.backward
ROUTE backwardClock.isActive TO movingTargetScript.forward
ROUTE thisTarget.isHit TO movingTargetScript.set_isHit
}#END movingTarget

PROTO Gun[
eventIn SFBool trigger
eventIn SFTime set_fireTime
field SFBool isHUD FALSE
field SFVec3f translation 0 0 0
field SFVec3f location  0 0 0
eventOut SFBool isHit
eventOut SFVec3f hitPoint
eventOut SFTime hitTime
eventOut SFTime shootTime 
eventOut SFBool shot
eventOut SFTime fireTime 
]{
DEF root Transform{children[
DEF main Transform{translation IS translation children [
#BEGIN GUNGEOMETRY--------------------------------------
Transform{rotation 1 0 0 1.571 translation 0 0 .375 children Shape{
appearance Appearance{material DEF chrome Material {ambientIntensity  .3 diffuseColor .26 .28 .23 specularColor 1 .8 .8 emissiveColor 0 0 0.1 shininess .1}}
geometry Cylinder{height .75 radius .025 top FALSE}}
}
Transform{ rotation 1 0 0 1.571 translation 0 -.02 .125 children Shape{
appearance Appearance{
material DEF brown Material{diffuseColor .2 .175 .15 specularColor 1 1 1 shininess 1}}
geometry Cylinder{radius .0225 height .3}}
}
Transform{rotation 1 0 0 1.4 translation 0 -.025 -.09 scale .5 1 1 children[
Shape{
appearance Appearance{material USE brown}
geometry Cone{height .5 bottomRadius .1}}
]}
#END GUNGEOMETRY-------------------------------------- 
Transform{translation 0 0 0 children[
Shape{
appearance Appearance{
material Material{diffuseColor 0 0 1 emissiveColor .2 .1 0 specularColor .2 .2 0 transparency .8}}
geometry Sphere{radius .25}}
DEF aimSensor SphereSensor{autoOffset FALSE isActive IS shot}
]}
]}#END main
DEF aimScript Script{
eventIn SFRotation set_rotation
eventOut SFRotation rotation_changed
eventOut SFRotation Vrotation_changed
url"vrmlscript:
function set_rotation(v,t){
 rotation_changed = new SFRotation(v[0],v[1],0,v[3]*-1);
}"}
Sound {intensity 1 direction 1 1 1 maxBack 100 maxFront 100 minBack 10 minFront 10 spatialize FALSE source DEF gunSound AudioClip {startTime IS set_fireTime pitch 1 loop FALSE url "sounds/shot3.wav"}}
DEF gunScript Script{
eventIn SFBool trigger
eventIn SFBool off
field SFBool isHUD IS isHUD
field SFVec3f offset IS location
field SFNode trans USE main
field SFVec3f endVec 0 0 100
field SFVec3f startVec 0 0 .5 
eventOut SFBool isHit IS isHit
eventOut SFVec3f hitPoint IS hitPoint
eventOut SFTime hitTime IS hitTime
eventOut SFTime shootTime IS fireTime
eventOut SFInt32 switch_changed
url"vrmlscript:
function trigger(v,t){
if(v){return;}
shootTime = t;
thisVec = (trans.rotation).multVec(endVec);
hit = Browser.computeRayHit(startVec.add(offset),thisVec.add(offset));
if(hit != null){
  hitPoint = hit.hitPoint.subtract(offset);
  //Browser.print(hitPoint);
  isHit = true;
  hitTime = t;
  switch_changed = 0;
}
else{ isHit = false;}
}
function off(v,t){
 if(v){return;}
 switch_changed = -1;
}
"}
]}#END root

DEF Explosion Switch{whichChoice -1 choice[
DEF eXplosion Transform{children [
Billboard{children[
Shape{
appearance Appearance{texture DEF explosion MovieTexture{ loop FALSE url"images/shot.gif" speed 1 }}
geometry IndexedFaceSet{coord Coordinate {point [.1 .1 0,-.1 .1 0,-.1 -.1 0,.1 -.1 0,0 0 .2]}coordIndex[0,1,4,-1,1,2,4,-1,2,3,4,-1,3,0,4,-1]}}
]}#end billboard
]}#END Transform
]}#END switch
ROUTE aimSensor.rotation_changed TO aimScript.set_rotation
ROUTE aimScript.rotation_changed TO main.set_rotation
ROUTE aimSensor.isActive TO gunScript.trigger
ROUTE gunScript.switch_changed TO Explosion.set_whichChoice
ROUTE gunScript.hitTime TO explosion.set_startTime
ROUTE gunScript.shootTime TO gunSound.set_startTime
ROUTE explosion.isActive TO gunScript.off
ROUTE gunScript.hitPoint TO eXplosion.set_translation
}#END Gun

PROTO ShootingGallery[
field SFVec3f position 0 0 0
eventIn SFTime set_fireTime
eventIn SFTime set_hitTime
eventIn SFBool set_reset
eventIn SFString set_score
eventOut SFTime fireTime_changed
eventOut SFTime hitTime_changed
eventOut SFBool reset_changed
eventOut SFString score_changed
]{
DEF SG Transform{
children[
DEF gun Gun{location IS position fireTime IS fireTime_changed set_fireTime IS set_fireTime}
Sound {intensity 1 direction 1 1 1 maxBack 100 maxFront 100 minBack 10 minFront 10 spatialize TRUE source AudioClip {startTime IS set_hitTime pitch 1 loop FALSE url"sounds/bell3.wav"}}

DEF SGView Viewpoint{position 0 0.1 -1 orientation 0 1 0 3.142}
Transform{translation .5 .45 .5 children[
Transform{translation 0 .065 -.05 rotation 0 1 0 3.142
children Shape{
appearance Appearance{
material Material{diffuseColor 1 1 1 specularColor 0 0 0}}
geometry DEF scores Text{string ["New","","Game"]fontStyle FontStyle {family "SANS" horizontal TRUE justify "MIDDLE" leftToRight TRUE size 0.06 spacing 1.0 style "BOLD" topToBottom TRUE}}}
}
Shape{appearance Appearance{material Material{diffuseColor 1 0 0 specularColor 1 1 0 emissiveColor 0 0 .01 }}geometry Sphere{radius .05}}
DEF resetButton TouchSensor{isActive IS reset_changed}
]}
Transform{translation .6 .5 2.9
children DEF arch Group{
children[
Shape {
appearance Appearance {texture PixelTexture{image 1 3 3 0xFF0000 0xFFFF00 0x000099}textureTransform TextureTransform{translation 0 -.15}}
geometry IndexedFaceSet {convex TRUE creaseAngle 3 coord Coordinate {point [-.2 0 0,-.6 0 0,-.4 .3 0,-.2 .4 0,.2 .4 0,-.1 -.8 0,-.1 -.1 0,.4 .3 0,.6 0 0,.2 0 0,.1 -.1 0,.1 -.8 0]}coordIndex [4,7,9,-1,4,9,10,-1,5,4,10,-1,10,11,5,-1,7,8,9,-1,6,0,2,-1,4,6,2,-1,4,5,6,-1,2,3,4,-1,0,1,2,-1,]}
}
DEF point Shape {
appearance Appearance {texture PixelTexture{image 1 2 3 0xFF0000 0x0000FF}textureTransform TextureTransform{rotation 1.571}}
geometry IndexedFaceSet {ccw FALSE coord Coordinate {point [0 .4 -.05,-.1 .3 .025,0 0 0,.1 .3 .025]}coordIndex [2,3,0,-1,0,1,2,-1]}
}
Transform{rotation 0 0 1 .78 children USE point}
Transform{rotation 0 0 1 -.78 children USE point}
DEF hemisphere Shape {
appearance Appearance {material DEF chrome Material { ambientIntensity  .3 diffuseColor .36 .38 .33 specularColor 1 1 1 emissiveColor 0 0 0.1 shininess .1}}
geometry IndexedFaceSet {creaseAngle 3 ccw FALSE convex TRUE coord Coordinate {point [.036 .05 -.018,-.036 .05 -.018,0 0 -.037,.095 -.031 .037,.059 -.019 -.018,.059 -.081 .037,.059 .081 .037,.095 .031 .037,-.059 .081 .037,0 .1 .037,-.095 -.031 .037,-.059 -.019 -.018,-.095 .031 .037,0 -.1 .037,0 -.062 -.018,-.059 -.081 .037]}coordIndex [2,4,0,-1,2,11,14,-1,2,1,11,-1,14,4,2,-1,14,11,15,-1,10,15,11,-1,4,14,5,-1,13,5,14,-1,0,4,7,-1,3,7,4,-1,1,0,9,-1,6,9,0,-1,11,1,12,-1,8,12,1,-1,13,14,15,-1,10,11,12,-1,8,1,9,-1,6,0,7,-1,3,4,5,-1,0,1,2,-1]}
}
]}#END arch
}
Transform{translation -.6 .5 2.9 children USE arch}
Transform{translation 0 1.5 5 scale 3 3 3 children USE arch}
Transform{translation 0 .5 3 scale 2 2 2 children USE hemisphere}
Transform {translation 0 -1.5 2 children [
Shape {
appearance DEF checker Appearance{ texture PixelTexture{
image 4 4 3 0x000044 0x000000 0x000044 0x000000 
            0x000000 0x000044 0x000000 0x000044 
            0x000044 0x000000 0x000044 0x000000 
            0x000000 0x000044 0x000000 0x000044 
}textureTransform TextureTransform{scale 3 3}}
geometry IndexedFaceSet {solid FALSE coord Coordinate {point [-3 3 4,-3 0 4,3 3 4,3 0 4,-1 1.45 0.1,-1 0 0.1,1 1.45 0.1,1 0 0.1,]}coordIndex [2,3,1,0,-1,6,7,5,4,-1]texCoord TextureCoordinate{point[1 1,0 1,0 0,1 0]}texCoordIndex[0,1,2,3,-1,0,1,2,3,-1]}
}
Transform{translation 1.5 1.5 1.002 scale 3 3 2 children[ Bullseye{} USE hemisphere]}
Transform{translation -1.5 1.5 1.002 scale 3 3 2 children[ Bullseye{} USE hemisphere]}
Transform{translation 0 1 0 children[ #display
Transform{translation 0 .25 0 rotation 0 1 0 3.142
children Shape{
appearance Appearance{material Material{diffuseColor 1 0 0 specularColor 1 0 0}}
geometry Text{string ["Score       Shots"] fontStyle FontStyle {family "SANS" horizontal TRUE justify "MIDDLE" leftToRight TRUE size 0.125 spacing 1.0 style "BOLD" topToBottom  TRUE}}
}}
Transform{rotation 0 1 0 3.142
children Shape{
appearance Appearance{material Material{diffuseColor 1 0 0 specularColor 1 0 0}}
geometry DEF scores Text{string ["0         0"]fontStyle FontStyle {family "SANS" horizontal TRUE justify "MIDDLE" leftToRight TRUE size 0.125 spacing 1.0 style "BOLD" topToBottom TRUE}}
}}
DEF displayScript Script{
eventIn SFFloat score
eventIn SFBool shot
eventIn SFBool reset IS set_reset
eventIn SFString set_score IS set_score
field SFFloat shots 0
field SFFloat scores 0
field SFFloat limit 25
field SFBool isDone FALSE
eventOut MFString score_changed
eventOut SFString score_sent IS score_changed
eventOut SFBool reset_changed
eventOut SFTime hitTime IS hitTime_changed
url"vrmlscript:
function shot(v){
 if(v || isDone){return;}
 shots += 1;
 if(shots >= limit){isDone = true;}
 score_changed = new MFString(scores+'        '+shots);
 score_sent = score_changed[0];
}
function score(v,t){
 if(isDone){return;}
 scores+=v;
 score_changed = new MFString(shots+'        '+scores);
 score_sent = score_changed[0];
 hitTime = t; 
}
function set_score(v){
 score_changed = new MFString(v);
} 
function reset(v){
 if(!v){return;}
 isDone = false;
 shots =0;
 scores = 0;
 reset_changed = true;
 score_changed = new MFString(scores+'        '+shots);
}
"}
]}#END display
]}
DEF d1 SGMovingTarget{interpolation [-1.5 0 3,1.5 0 3] Z 3 hitUrl "sounds/bell3.wav" children Bullseye{image 1 4 3 0xFF9900 0x000000 0xFF9900 0x000000}}
DEF d2 SGMovingTarget{interpolation [1.5 0 3.1,-1.5 0 3.1] Z 3.1 direction [0 1 0 3.142,0 1 0 0]children Bullseye{image 1 4 3 0xFF9900 0x000000 0xFF9900 0x000000} hitUrl "sounds/bell3.wav"}
DEF d3 SGMovingTarget{interpolation [1.5 -1 3.53,-1.5 2 3.53] Z 3.53 children Bullseye{image 1 4 3 0x009900 0x000000 0x009900 0x000000} hitUrl "sounds/bell3.wav" point_value 3}
DEF d4 SGMovingTarget{cycleInterval 3.25 interpolation [1.5 2 3.54,-1.5 -1 3.54] Z 3.54 direction [0 1 0 3.142,0 1 0 0] children Bullseye{image 1 4 3 0x009900 0x000000 0x009900 0x000000} hitUrl "sounds/bell3.wav" point_value 3}
DEF d5 SGMovingTarget{cycleInterval 2.25 interpolation [-1.5 2 3.55,1.5 -1 3.55] Z 3.55 direction [0 1 0 3.142,0 1 0 0] children Bullseye{image 1 4 3 0x990099 0x000000 0x990099 0x000000} hitUrl "sounds/bell3.wav" point_value 8 }
DEF d6 SGMovingTarget{cycleInterval 2 interpolation [-1.5 -1 3.56,1.5 2 3.56] Z 3.56 direction [0 1 0 3.142,0 1 0 0] children Bullseye{image 1 4 3 0x990099 0x000000 0x990099 0x000000} hitUrl "sounds/bell3.wav" point_value 8 }
DEF target1 Transform{translation -.65 1 3.25 children[
DEF yellowEye Bullseye{ image 1 4 3 0xFFFF00 0x000000 0xFFFF00 0x000000}
DEF t11 Target{translation 0 0 0 hitUrl "sounds/bell3.wav" Z 3.225 point_value 5 children[
DEF bullseye Group{ children[
Transform{translation 0 .4 -0.025 children Bullseye{}}
DEF stem Shape {
appearance Appearance {material Material {ambientIntensity  .3 diffuseColor 0 0 .5}}
geometry IndexedFaceSet {ccw FALSE coord Coordinate {point [0 .45 -.0115,-.076 .4 .025,0 0 0,.076 .4 .025]}coordIndex [2,3,0,-1,0,1,2,-1]}
}
]}#END bullseye
]}#end t11
DEF t12 Target{translation 0 0 .001 rotation 0 0 1 1.571 hitUrl "sounds/bell3.wav" Z 3.226 point_value 5 children[USE bullseye]}#end t12
DEF t13 Target{translation 0 0 .002 rotation 0 0 1 -1.571 hitUrl "sounds/bell3.wav" Z 3.227 point_value 5 children[USE bullseye]}#end t13
DEF t14 Target{translation 0 0 .003 rotation 0 0 1 3.142 hitUrl "sounds/bell3.wav" Z 3.228 point_value 5 children[USE bullseye]}#end t14
DEF t1Count TargetCounter{numHits 4 interval 4 hitUrl "saw.wav"}
DEF t1Clock TimeSensor{loop TRUE enabled FALSE cycleInterval 4}
DEF t1 OrientationInterpolator{key[0,.5,1] keyValue[0 0 1 0,0 0 1 3.142,0 0 1 6.284]}
]}
DEF target2 Transform{translation .65 1 3.25 children[
USE yellowEye
DEF t21 Target{translation 0 0 -.001 hitUrl "sounds/bell3.wav" Z 3.224 point_value 5 children[USE bullseye]}#end t21
DEF t22 Target{translation 0 0 -.002 rotation 0 0 1 1.571 hitUrl "sounds/bell3.wav" Z 3.223 point_value 5 children[USE bullseye]}#end t22
DEF t23 Target{translation 0 0 -.003 rotation 0 0 1 -1.571 hitUrl "sounds/bell3.wav" Z 3.222 point_value 5 children[USE bullseye]}#end t23
DEF t24 Target{translation 0 0 -.004 rotation 0 0 1 3.142 hitUrl "sounds/bell3.wav" Z 3.221 point_value 5 children[USE bullseye]}#end t24
DEF t2Count TargetCounter{numHits 4 interval 4 hitUrl "sounds/saw.wav"}
DEF t2 OrientationInterpolator{key[0,.5,1] keyValue[0 0 1 0,0 0 1 -3.142,0 0 1 -6.284]}
]}
DEF SGbindScript Script{
 eventIn SFBool input
 eventOut SFBool output
url"vrmlscript:
 function input(v,t){
  if(v){output = true;}
 }
"}
DEF SGProx ProximitySensor{ size 10 10 10 }
]}#END SG
#!!!!!!!!!!!!!!END Shooting Gallery
ROUTE displayScript.score_changed TO scores.set_string
ROUTE d1.point_scored TO displayScript.score
ROUTE d2.point_scored TO displayScript.score
ROUTE d3.point_scored TO displayScript.score
ROUTE d4.point_scored TO displayScript.score
ROUTE d5.point_scored TO displayScript.score 
ROUTE d6.point_scored TO displayScript.score
ROUTE t11.point_scored TO displayScript.score
ROUTE t12.point_scored TO displayScript.score
ROUTE t13.point_scored TO displayScript.score
ROUTE t14.point_scored TO displayScript.score
ROUTE t21.point_scored TO displayScript.score
ROUTE t22.point_scored TO displayScript.score
ROUTE t23.point_scored TO displayScript.score
ROUTE t24.point_scored TO displayScript.score
ROUTE t1Count.point_scored TO displayScript.score
ROUTE t2Count.point_scored TO displayScript.score

ROUTE gun.hitPoint TO d1.hitPoint
ROUTE gun.hitPoint TO d2.hitPoint
ROUTE gun.hitPoint TO d3.hitPoint
ROUTE gun.hitPoint TO d4.hitPoint
ROUTE gun.hitPoint TO d5.hitPoint
ROUTE gun.hitPoint TO d6.hitPoint

ROUTE gun.shot TO displayScript.shot
ROUTE gun.shot TO SGbindScript.input
ROUTE SGbindScript.output TO SGView.set_bind

ROUTE SGProx.isActive TO d1.set_enabled
ROUTE SGProx.isActive TO d2.set_enabled
ROUTE SGProx.isActive TO d3.set_enabled
ROUTE SGProx.isActive TO d4.set_enabled
ROUTE SGProx.isActive TO d5.set_enabled
ROUTE SGProx.isActive TO d6.set_enabled
ROUTE SGProx.isActive TO t1Clock.set_enabled

ROUTE SGProx.enterTime TO d1.set_startTime
ROUTE SGProx.enterTime TO d2.set_startTime
ROUTE SGProx.enterTime TO d3.set_startTime 
ROUTE SGProx.enterTime TO d4.set_startTime 
ROUTE SGProx.enterTime TO d5.set_startTime 
ROUTE SGProx.enterTime TO d6.set_startTime 
ROUTE SGProx.enterTime TO t1Clock.set_startTime   

ROUTE t1Clock.fraction_changed TO t1.set_fraction
ROUTE t1.value_changed TO target1.set_rotation
ROUTE gun.hitPoint TO t11.hitPoint
ROUTE gun.hitPoint TO t12.hitPoint
ROUTE gun.hitPoint TO t13.hitPoint
ROUTE gun.hitPoint TO t14.hitPoint
ROUTE displayScript.reset_changed TO t11.reset
ROUTE displayScript.reset_changed TO t12.reset
ROUTE displayScript.reset_changed TO t13.reset
ROUTE displayScript.reset_changed TO t14.reset
ROUTE t11.isHit TO t1Count.set_isHit
ROUTE t12.isHit TO t1Count.set_isHit
ROUTE t13.isHit TO t1Count.set_isHit
ROUTE t14.isHit TO t1Count.set_isHit
ROUTE t1Count.reset TO t11.reset
ROUTE t1Count.reset TO t12.reset
ROUTE t1Count.reset TO t13.reset
ROUTE t1Count.reset TO t14.reset

ROUTE t1Clock.fraction_changed TO t2.set_fraction
ROUTE t2.value_changed TO target2.set_rotation
ROUTE gun.hitPoint TO t21.hitPoint
ROUTE gun.hitPoint TO t22.hitPoint
ROUTE gun.hitPoint TO t23.hitPoint
ROUTE gun.hitPoint TO t24.hitPoint
ROUTE displayScript.reset_changed TO t21.reset
ROUTE displayScript.reset_changed TO t22.reset
ROUTE displayScript.reset_changed TO t23.reset
ROUTE displayScript.reset_changed TO t24.reset
ROUTE t21.isHit TO t2Count.set_isHit
ROUTE t22.isHit TO t2Count.set_isHit
ROUTE t23.isHit TO t2Count.set_isHit
ROUTE t24.isHit TO t2Count.set_isHit
ROUTE t2Count.reset TO t21.reset
ROUTE t2Count.reset TO t22.reset
ROUTE t2Count.reset TO t23.reset
ROUTE t2Count.reset TO t24.reset

ROUTE resetButton.isActive TO displayScript.reset
ROUTE displayScript.reset_changed TO d1.reset
ROUTE displayScript.reset_changed TO d2.reset
ROUTE displayScript.reset_changed TO d3.reset
ROUTE displayScript.reset_changed TO d4.reset
ROUTE displayScript.reset_changed TO d5.reset
ROUTE displayScript.reset_changed TO d6.reset
}#END ShootingGallery PROTO



PROTO RideView[
eventIn SFBool bind
exposedField SFBool headlight TRUE
exposedField SFString description ""
exposedField SFVec3f position 0 0 0
exposedField SFRotation orientation 0 1 0 0
exposedField SFVec3f translation 0 0 0
exposedField SFRotation rotation 0 1 0 0
field SFFloat upLimit 1
field SFFloat downLimit -.5
field SFFloat leftLimit 1.8
field SFFloat rightLimit -1.8
eventOut SFBool leave
]{
DEF thisNav NavigationInfo {
headlight IS headlight
type "NONE"
}
DEF thisSwitch Switch{whichChoice -1 choice[
Transform{translation IS translation rotation IS rotation children[

HUD{
children[
Transform{
translation .125 0 -.25
children [
Transform{translation 0 .02 0
children Shape{
appearance Appearance{material Material{diffuseColor 0 0 0 specularColor 0 0 0}}
geometry Text{string ["Exit","Ride"]fontStyle FontStyle { family "SANS" horizontal TRUE justify "MIDDLE" language "" leftToRight TRUE size 0.008 spacing 1.0 style "BOLD" topToBottom  TRUE}}
}}
DEF leaveButton TouchSensor{enabled TRUE}
Shape{
appearance Appearance {material Material {diffuseColor 1 0 0 }}
geometry Sphere{radius .0075}
}
]}
]}

DEF Yaxis Transform{children [
DEF Xaxis Transform{children [
DEF thisView Viewpoint{position IS position orientation IS orientation description IS description}

Transform{translation 0 .41 -.5 children[
DEF upButton TouchSensor{enabled FALSE}
Shape{
appearance DEF Clear Appearance {
material Material {transparency 1 diffuseColor 1 0 0 }}
geometry Box{size .7 .5 .01}
}
]}
Transform{
translation 0 -.41 -.5
children[
DEF downButton TouchSensor{enabled FALSE}
Shape{appearance USE Clear geometry Box{size .7 .5 .01}}
]}
Transform{translation -.5 0 -.5 children[
DEF leftButton TouchSensor{enabled FALSE}
Shape{appearance USE Clear geometry Box{size .3 1.32 .01}}
]}
Transform{translation .5 0 -.5 children[
DEF rightButton TouchSensor{enabled FALSE}
Shape{appearance USE Clear geometry Box{size .3 1.32 .01}}
]}
DEF Clock TimeSensor{cycleInterval 3 loop FALSE enabled TRUE}
DEF ChangeOrientation Script{
eventIn SFBool bind IS bind
eventIn SFBool up
eventIn SFBool down
eventIn SFBool left
eventIn SFBool right
eventIn SFBool leave
eventIn SFFloat set_fraction
eventOut SFTime startTime_changed
eventOut SFTime stopTime_changed
field SFFloat lastXRotation 0
field SFFloat lastYRotation 0
field SFFloat step         .04
field SFFloat upLimit IS upLimit
field SFFloat downLimit IS downLimit
field SFFloat leftLimit IS leftLimit
field SFFloat rightLimit IS rightLimit
field SFBool isUp FALSE
field SFBool isDown FALSE
field SFBool isLeft FALSE
field SFBool isRight FALSE
eventOut SFRotation rotationX_changed
eventOut SFRotation rotationY_changed
eventOut SFBool leaveNow IS leave
eventOut SFBool unbind
eventOut SFBool bind_changed
eventOut SFInt32 choice_changed
url"vrmlscript:
function bind(v,t){
 if(!v){return;}
 else{ bind_changed = true; choice_changed = 0;}
} 
function leave(v,t){
 if(!v){return;}
 else{
  //print('!!');
  unbind = false;
  leaveNow = true;
  choice_changed = -1;
 }
}
function up(v,t){
if(v){    
 startTime_changed = t;
 isUp = true;
}
else{
 stopTime_changed = t;
 isUp = false;
}}
function down(v,t){
if(v){
 startTime_changed = t;
 isDown = true;
}
else{
 stopTime_changed = t;
 isDown = false;
}}

function left(v,t){
if(v){
 startTime_changed = t;
 isLeft = true;
}
else{
 stopTime_changed = t;
 isLeft = false;
}}
function right(v,t){
if(v){
 startTime_changed = t;
 isRight = true;
}
else{
 stopTime_changed = t;
 isRight = false;
}}
function set_fraction(v,t){
 if(isUp){
   newRad = (lastXRotation + step);
   if(newRad > upLimit){newRad = upLimit;}
   rotationX_changed = new SFRotation(1,0,0,newRad);
   lastXRotation = newRad;
 }
 if(isDown){
   newRad = (lastXRotation - step);
   if(newRad < downLimit){newRad = downLimit;}
   rotationX_changed = new SFRotation(1,0,0,newRad);
   lastXRotation = newRad;
 }
 if(isLeft){
   newRad = (lastYRotation + step);
   if(newRad > leftLimit){newRad = leftLimit;}
   rotationY_changed = new SFRotation(0,1,0,newRad);
   lastYRotation = newRad;
 }
 if(isRight){
   newRad = (lastYRotation - step);
   if(newRad < rightLimit){newRad = rightLimit;}
   rotationY_changed = new SFRotation(0,1,0,newRad);
   lastYRotation = newRad;
 }
}
"}]}]}]}
Group{}
]}
ROUTE upButton.isOver TO ChangeOrientation.up
ROUTE downButton.isOver TO ChangeOrientation.down
ROUTE leftButton.isOver TO ChangeOrientation.left
ROUTE rightButton.isOver TO ChangeOrientation.right
ROUTE ChangeOrientation.startTime_changed TO Clock.set_startTime
ROUTE ChangeOrientation.stopTime_changed TO Clock.set_stopTime
ROUTE Clock.fraction_changed TO ChangeOrientation.set_fraction
ROUTE ChangeOrientation.rotationX_changed TO Xaxis.set_rotation
ROUTE ChangeOrientation.rotationY_changed TO Yaxis.set_rotation
ROUTE leaveButton.isActive TO ChangeOrientation.leave
ROUTE ChangeOrientation.unbind TO thisView.set_bind
ROUTE ChangeOrientation.bind_changed TO thisView.set_bind
ROUTE ChangeOrientation.choice_changed TO thisSwitch.set_whichChoice
ROUTE thisView.isBound TO thisNav.set_bind
ROUTE thisView.isBound TO upButton.set_enabled
ROUTE thisView.isBound TO downButton.set_enabled
ROUTE thisView.isBound TO leftButton.set_enabled
ROUTE thisView.isBound TO rightButton.set_enabled
ROUTE thisView.isBound TO leaveButton.set_enabled
}#END RIDEVIEW PROTO

PROTO FWSegment [
field SFRotation rotation 0 0 1 0
eventIn SFRotation set_rotation
]{
Transform{rotation IS rotation children[
DEF seat Transform{ translation 0 19.25 0 children[
DEF thisView RideView{translation 0 .7 0 rotation 0 1 0 1.571}
DEF rideButton TouchSensor{}
DEF seatGeometry Shape{
appearance Appearance{material Material{diffuseColor .5 0 0}}
geometry IndexedFaceSet{ solid FALSE ccw TRUE convex TRUE coord Coordinate{point[1 .5 2,1 .5 -2,-1 0 -2,-1 0 2,.75 -1.25 2,.75 -1.25 -2,-.75 -1.25 -2,-.75 -1.25 2,]}coordIndex[1,0,4,5,-1,2,1,5,6,-1,3,2,6,7,-1,0,3,7,4,-1,4,5,6,7,-1]texCoord TextureCoordinate{point[0 0,1 0,1 1,0 1]}texCoordIndex[0,1,2,3,-1,0,1,2,3,-1,0,1,2,3,-1,0,1,2,3,-1,0,1,2,3,-1]}
}
DEF seatRotate Script{
eventIn SFRotation set_rotation IS set_rotation
field SFRotation rotation IS rotation
eventOut SFRotation rotation_changed
url"vrmlscript:
function initialize(){
theta = (0 - rotation[3]) * 1;
rotation_changed = new SFRotation(0,0,1,theta);
}
function set_rotation(v,t){
theta = (v[3] - rotation[3]) * 1;
rotation_changed = new SFRotation(0,0,1,theta);
}
"}
]}#END seat
DEF arm Transform{children[
LOD{range[70] level[
Group{children[
DEF thisArm Shape{
appearance Appearance{material Material{diffuseColor 0.2 0.2 .3}texture ImageTexture{url "images/fw.jpg"}textureTransform TextureTransform{scale 1 5}}
geometry DEF armGeometry IndexedFaceSet{solid TRUE ccw TRUE convex TRUE creaseAngle 3 coord Coordinate{point[.5 0 4.5,.5 0 2,.25 19.5 2.4,-.25 19.5 2.4,.25 19.5 2.2,-.25 19.5 2.2,-.5 0 4.5,-.5 0 2]}coordIndex[6,0,2,3,-1,1,7,5,4,-1,0,1,4,2,-1,7,6,3,5,-1]texCoord TextureCoordinate{point[0 0,1 0,1 1,0 1,.05 1,.65 1,0 1,.25 1]}texCoordIndex[0,1,2,3,-1,0,1,2,3,-1,1,0,6,7,-1,0,1,5,4,-1]}
}
Transform{rotation 0 1 0 3.142 children USE thisArm}
Transform{translation 0 19.25 2.25 scale 1 1 .5
children DEF ball Shape{
appearance Appearance{material DEF chrome Material {ambientIntensity  .3 diffuseColor .26 .28 .23 specularColor 1 .8 .8 emissiveColor 0 0 0.1 shininess .1}}
geometry Sphere{radius .5}
}}
Transform{translation 0 19.25 -2.25 scale 1 1 .5 children USE ball}
]}
Group{
children[
DEF thatArm Shape{
appearance Appearance{material Material{diffuseColor 0.2 0.2 .3}}
geometry USE armGeometry
}
Transform{rotation 0 1 0 3.142 children USE thatArm}
]}
]}#END LOD
]}#END ARM
]}#END MAIN GROUP
ROUTE seatRotate.rotation_changed TO seat.set_rotation
ROUTE rideButton.isActive TO thisView.bind
}#END FWSEGMENT

PROTO FerrisWheel[
field SFVec3f position 0 21 0
field SFVec3f scale 1 1 1
]{
Transform{translation IS position scale IS scale children[
DEF Wheel Transform{translation 0 0 0 children[
DEF seg1 FWSegment{}
Transform{children DEF seg2 FWSegment{rotation 0 0 1 .785}}
Transform{children DEF seg3 FWSegment{rotation 0 0 1 1.57}}
Transform{children DEF seg4 FWSegment{rotation 0 0 1 2.35}}
Transform{children DEF seg5 FWSegment{rotation 0 0 1 3.14}}
Transform{children DEF seg6 FWSegment{rotation 0 0 1 3.925}}
Transform{children DEF seg7 FWSegment{rotation 0 0 1 4.71}}
Transform{children DEF seg8 FWSegment{rotation 0 0 1 5.495}}
Transform{rotation 1 0 0 1.571 children[
Shape{
appearance Appearance{material DEF chrome Material {ambientIntensity  .3 diffuseColor .26 .28 .23 specularColor 1 .8 .8 emissiveColor 0 0 0.1 shininess .1}}
geometry Cylinder{height 15 radius 1}
}
]}
DEF turnClock TimeSensor{loop TRUE enabled TRUE cycleInterval 15}
DEF turn OrientationInterpolator{key [0,.5,1] keyValue [ 0 0 1 0,0 0 1 -3.14,0 0 1 -6.28]}
DEF wheelProx ProximitySensor{size 200 200 200}
]}#END Wheel
DEF support Group{ children[
Transform{rotation 0 0 1 .5 children[
DEF strut Shape{
appearance Appearance{texture ImageTexture{url "images/fw.jpg"}textureTransform TextureTransform{scale 1 6}}
geometry IndexedFaceSet{solid FALSE ccw TRUE convex TRUE coord Coordinate{point[1 0 6,1 0 5,-1 0 6,-1 0 5,1 -25 6,1 -25 5,-1 -25 6,-1 -25 5,]}coordIndex[1,0,4,5,-1,2,1,5,6,-1,3,2,6,7,-1,0,3,7,4,-1]texCoord TextureCoordinate{point[0 0,1 0,1 1,0 1]}texCoordIndex[0,1,2,3,-1,0,1,2,3,-1,0,1,2,3,-1,0,1,2,3,-1,0,1,2,3,-1]}
}
]}
Transform{rotation 0 0 1 -.5 children USE strut}
Transform{translation 0 0 5.5 rotation 1 0 0 1.571 children[
Shape{
appearance Appearance{material USE chrome}
geometry Cylinder{height 2 radius 2}}
]}
]}#END SUPPORT GROUP
Transform{rotation 0 1 0 3.142 children USE support}
]}#END POSITIONING TRANSFORM
ROUTE wheelProx.isActive TO turnClock.set_enabled
ROUTE wheelProx.enterTime TO turnClock.set_startTime
ROUTE turnClock.fraction_changed TO turn.set_fraction
ROUTE turn.value_changed TO Wheel.set_rotation
ROUTE turn.value_changed TO seg1.set_rotation
ROUTE turn.value_changed TO seg2.set_rotation
ROUTE turn.value_changed TO seg3.set_rotation
ROUTE turn.value_changed TO seg4.set_rotation
ROUTE turn.value_changed TO seg5.set_rotation
ROUTE turn.value_changed TO seg6.set_rotation
ROUTE turn.value_changed TO seg7.set_rotation
ROUTE turn.value_changed TO seg8.set_rotation
}#END FerrisWheel PROTO

PROTO Fountain[
field SFVec3f position 0 0 0
field SFVec3f scale 1 1 1
]{
# Interactive Fountain
# created by Roveila Dargnen ogastes@geocities.com
Transform{translation IS position scale IS scale children[
Transform { scale .5 .5 .5 children [
DEF ENTER-PROXY ProximitySensor { center 0 4 0 size 190 10 80}
#### Base
Shape {
appearance Appearance { texture ImageTexture { url "images/tex02.gif"}}
geometry IndexedFaceSet {coord Coordinate { point [-11 -0.5 11,11 -0.5 11,11 -0.5 -11,-11 -0.5 -11,-20 -.3 -20,-12 -.3 -20,12 -.3 -20,20 -.3 -20,-20 -.3 -12,-12 0 -12,12 0 -12,20 -.3 -12,-20 -.3 12,-12 0 12,12 0 12,20 -.3 12,-20 -.3 20,-12 -.3 20,12 -.3 20,20 -.3 20]}coordIndex [0,1,2,3,-1,8,9,5,4,-1, 9,10,6,5,-1, 10,11,7,6,-1,12,13,9,8,-1, 14,15,11,10,-1,16,17,13,12,-1, 17,18,14,13,-1, 18,19,15,14,-1,]texCoord TextureCoordinate { point [-2 2, 2 2, 2 -2 ,-2 -2,-6.666 -6.666, -4 -6.666, 4 -6.666, 6.666 -6.666,-6.666 -4, -4 -4, 4 -4, 6.666 -4,-6.666 4, -4 4, 4 4, 6.666 4,-6.666 6.666, -4 6.666, 4 6.666, 6.666 6.666,]}texCoordIndex [0,1,2,3,-1, 8,9,5,4,-1, 9,10,6,5,-1, 10,11,7,6,-1,12,13,9,8,-1, 14,15,11,10,-1,16,17,13,12,-1, 17,18,14,13,-1, 18,19,15,14,-1,]}
}
Shape {
appearance Appearance {
#pink material Material { diffuseColor 0.6 0.4 0.4 emissiveColor 0.2 0.2 0.2}
texture ImageTexture{url"images/stone.gif"}textureTransform TextureTransform{scale 4 1 rotation 1.571}}
geometry IndexedFaceSet {coord Coordinate { point [-11 -0.5 11, 11 -0.5 11, 11 -0.5 -11, -11 -0.5 -11,-12 0.5 12, 12 0.5 12, 12 0.5 -12, -12 0.5 -12,-12 0 12, 12 0 12, 12 0 -12, -12 0 -12, ]}coordIndex [4,5,1,0,-1,5,6,2,1,-1,6,7,3,2,-1,7,4,0,3,-1,8,9,5,4,-1,9,10,6,5,-1,10,11,7,6,-1,11,8,4,7,-1]
	texCoord TextureCoordinate{point[0 1,0 0,1 0,1 1,0 1,0 .25,1 .25,1 1]}
	texCoordIndex[0,1,2,3,-1,0,1,2,3,-1,0,1,2,3,-1,0,1,2,3,-1,0,1,2,3,-1,0,1,2,3,-1,0,1,2,3,-1,0,1,2,3,-1,]}
}
Shape {
appearance Appearance {material Material { diffuseColor 0.8 0.9 1 emissiveColor 0.2 0.3 0.4 transparency 0.5 }}
geometry IndexedFaceSet {coord Coordinate { point [-11.5 -0.2 11.5, 11.5 -0.2 11.5, 11.5 -0.2 -11.5, -11.5 -0.2 -11.5,]}coordIndex [0,1,2,3,-1,]}
}
Collision {collide FALSE children [
### stars
Transform {rotation 0 1 0 0 children [
DEF STAR Transform {translation -9.95 -0.97 0 children[
DEF STAR-TIMER TimeSensor { loop FALSE cycleInterval 1}
DEF STAR-TIMER1 TimeSensor { loop FALSE cycleInterval 1}
DEF STAR-POS PositionInterpolator { key [0,1] keyValue [-9.95 -0.97 0, -9.95 -0.5 0]}
DEF STAR-POS1 PositionInterpolator { key [0,1] keyValue [-9.95 -0.5 0, -9.95 -0.97 0]}
Shape {
appearance Appearance { material Material { diffuseColor 0.3 0.2 0 emissiveColor 0.1 0.1 0}}
geometry IndexedFaceSet {solid FALSE coord Coordinate { point [-0.3 0.5 0, 0 0.5 0.3, 0.3 0.5 0, 0 0.5 -0.3, -0.1 0 0, 0 0 0.1, 0.1 0 0, 0 0 -0.1,]}coordIndex [0,1,2,3,-1, 3,1,5,7,-1, 0,2,6,4,-1]}
}
]}
]}
Transform {rotation 0 1 0 0.52 children USE STAR}
Transform {rotation 0 1 0 1.04 children USE STAR}
Transform {rotation 0 1 0 1.56 children USE STAR}
Transform {rotation 0 1 0 2.12 children USE STAR}
Transform {rotation 0 1 0 2.64 children USE STAR}
Transform {rotation 0 1 0 3.14 children USE STAR}
Transform {rotation 0 1 0 3.66 children USE STAR}
Transform {rotation 0 1 0 4.18 children USE STAR}          
Transform {rotation 0 1 0 4.7 children USE STAR}
Transform {rotation 0 1 0 5.22 children USE STAR}
Transform {rotation 0 1 0 5.74 children USE STAR}
### fountain water
DEF STR Transform {center -10 0 0 scale 0 0 0 children [
DEF TIMER1 TimeSensor { loop FALSE cycleInterval 1.2 }
DEF TIMER_A1 TimeSensor { loop FALSE cycleInterval 1.2 }
DEF STR1-SC PositionInterpolator { key [0,1] keyValue [0 0 0, 1 4 1] }
DEF STR_A1-SC PositionInterpolator { key [0,1] keyValue [1 4 1, 0 0 0, ] }
DEF STR-SHAPE Shape {
appearance Appearance { texture ImageTexture { url "images/tex01.gif"}textureTransform DEF WATER-TT TextureTransform {}}
geometry IndexedFaceSet {coord Coordinate { point [-10 0 0, -9.9 0 0, -7.8 3 0, -8 4 0, -6.5 3.5 0,-6 5 0,-5.3 3 0, -4 4 0, -4 -0.5 0, -1.5 -0.5 0,]}coordIndex [1,2,3,0, -1, 2,4,5,3,-1, 4,6,7,5,-1, 6,8,9,7,-1,]texCoord TextureCoordinate { point [0 0, 1 0, 1 1, 0 1,]}texCoordIndex [0,1,2,3,-1, 0,1,2,3,-1, 0,1,2,3,-1, 0,1,2,3,-1,]solid FALSE}
}
]}
DEF LINE2 Transform {rotation 0 1 0 0.52 children [
DEF STR2 Transform {center -10 0 0  scale 0 0 0  children [
DEF TIMER2 TimeSensor { loop FALSE cycleInterval 1.2 }
DEF TIMER_A2 TimeSensor { loop FALSE cycleInterval 1.2 }
DEF STR2-SC PositionInterpolator { key [0,1] keyValue [0 0 0, 1 4 1] }
DEF STR_A2-SC PositionInterpolator { key [0,1] keyValue [1 4 1, 0 0 0, ] }
USE STR-SHAPE
]}
]}
DEF LINE3 Transform {rotation 0 1 0 1.04 children [
DEF STR3 Transform {center -10 0 0  scale 0 0 0  children [
DEF TIMER3 TimeSensor { loop FALSE cycleInterval 1.2 }
DEF TIMER_A3 TimeSensor { loop FALSE cycleInterval 1.2 }
DEF STR3-SC PositionInterpolator { key [0,1] keyValue [0 0 0, 1 4 1] }
DEF STR_A3-SC PositionInterpolator { key [0,1] keyValue [1 4 1, 0 0 0, ] }
USE STR-SHAPE
]}
]}
DEF LINE4 Transform {rotation 0 1 0 1.56 children [
 DEF STR4 Transform {  center -10 0 0  scale 0 0 0  children [
   DEF TIMER4 TimeSensor { loop FALSE cycleInterval 1.2 }
   DEF TIMER_A4 TimeSensor { loop FALSE cycleInterval 1.2 }
   DEF STR4-SC PositionInterpolator { key [0,1] keyValue [0 0 0, 1 4 1] }
   DEF STR_A4-SC PositionInterpolator { key [0,1] keyValue [1 4 1, 0 0 0, ] }
   USE STR-SHAPE
  ]}
]}
DEF LINE5 Transform {rotation 0 1 0 2.12 children [
DEF STR5 Transform {  center -10 0 0  scale 0 0 0  children [
   DEF TIMER5 TimeSensor { loop FALSE cycleInterval 1.2 }
   DEF TIMER_A5 TimeSensor { loop FALSE cycleInterval 1.2 }
   DEF STR5-SC PositionInterpolator { key [0,1] keyValue [0 0 0, 1 4 1] }
   DEF STR_A5-SC PositionInterpolator { key [0,1] keyValue [1 4 1, 0 0 0, ] }
   USE STR-SHAPE
  ]}
]}
DEF LINE6 Transform {rotation 0 1 0 2.64 children [
DEF STR6 Transform {  center -10 0 0  scale 0 0 0  children [
   DEF TIMER6 TimeSensor { loop FALSE cycleInterval 1.2 }
   DEF TIMER_A6 TimeSensor { loop FALSE cycleInterval 1.2 }
   DEF STR6-SC PositionInterpolator { key [0,1] keyValue [0 0 0, 1 4 1] }
   DEF STR_A6-SC PositionInterpolator { key [0,1] keyValue [1 4 1, 0 0 0, ] }
   USE STR-SHAPE
  ]}
]}
DEF LINE7 Transform {rotation 0 1 0 3.14 children [
DEF STR7 Transform {  center -10 0 0  scale 0 0 0  children [
   DEF TIMER7 TimeSensor { loop FALSE cycleInterval 1.2 }
   DEF TIMER_A7 TimeSensor { loop FALSE cycleInterval 1.2 }
   DEF STR7-SC PositionInterpolator { key [0,1] keyValue [0 0 0, 1 4 1] }
   DEF STR_A7-SC PositionInterpolator { key [0,1] keyValue [1 4 1, 0 0 0, ] }
   USE STR-SHAPE
  ]}
]}
DEF LINE8 Transform {rotation 0 1 0 3.66 children [
 DEF STR8 Transform {  center -10 0 0  scale 0 0 0  children [
   DEF TIMER8 TimeSensor { loop FALSE cycleInterval 1.2 }
   DEF TIMER_A8 TimeSensor { loop FALSE cycleInterval 1.2 }
   DEF STR8-SC PositionInterpolator { key [0,1] keyValue [0 0 0, 1 4 1] }
   DEF STR_A8-SC PositionInterpolator { key [0,1] keyValue [1 4 1, 0 0 0, ] }
   USE STR-SHAPE
  ]}
]}
DEF LINE9 Transform {rotation 0 1 0 4.18 children [
 DEF STR9 Transform {  center -10 0 0  scale 0 0 0  children [
   DEF TIMER9 TimeSensor { loop FALSE cycleInterval 1.2 }
   DEF TIMER_A9 TimeSensor { loop FALSE cycleInterval 1.2 }
   DEF STR9-SC PositionInterpolator { key [0,1] keyValue [0 0 0, 1 4 1] }
   DEF STR_A9-SC PositionInterpolator { key [0,1] keyValue [1 4 1, 0 0 0, ] }
   USE STR-SHAPE
  ]}
]}
DEF LINE10 Transform { rotation 0 1 0 4.7 center 0 0 0 children [
 DEF STR10 Transform {  center -10 0 0  scale 0 0 0  children [
   DEF TIMER10 TimeSensor { loop FALSE cycleInterval 1.2 }
   DEF TIMER_A10 TimeSensor { loop FALSE cycleInterval 1.2 }
   DEF STR10-SC PositionInterpolator { key [0,1] keyValue [0 0 0, 1 4 1] }
   DEF STR_A10-SC PositionInterpolator { key [0,1] keyValue [1 4 1, 0 0 0, ] }
   USE STR-SHAPE
  ]}
]}
DEF LINE11 Transform {rotation 0 1 0 5.22 center 0 0 0  children [
 DEF STR11 Transform {  center -10 0 0  scale 0 0 0  children [
   DEF TIMER11 TimeSensor { loop FALSE cycleInterval 1.2 }
   DEF TIMER_A11 TimeSensor { loop FALSE cycleInterval 1.2 }
   DEF STR11-SC PositionInterpolator { key [0,1] keyValue [0 0 0, 1 4 1] }
   DEF STR_A11-SC PositionInterpolator { key [0,1] keyValue [1 4 1, 0 0 0, ] }
   USE STR-SHAPE
  ]}
]}
DEF LINE12 Transform {rotation 0 1 0 5.74 center 0 0 0 children [
 DEF STR12 Transform {  center -10 0 0  scale 0 0 0  children [
   DEF TIMER12 TimeSensor { loop FALSE cycleInterval 1.2 }
   DEF TIMER_A12 TimeSensor { loop FALSE cycleInterval 1.2 }
   DEF STR12-SC PositionInterpolator { key [0,1] keyValue [0 0 0, 1 4 1] }
   DEF STR_A12-SC PositionInterpolator { key [0,1] keyValue [1 4 1, 0 0 0, ] }
   USE STR-SHAPE
  ]}
]}
DEF TIMER TimeSensor { loop FALSE cycleInterval 6.8 }
DEF S Script {
eventIn SFTime startTime
eventIn SFTime stopTime
eventIn SFBool water_active
eventOut SFTime start_star
eventOut SFTime start1
eventOut SFTime start2
eventOut SFTime start3
eventOut SFTime start4
eventOut SFTime start5
eventOut SFTime start6
eventOut SFTime start7
eventOut SFTime start8
eventOut SFTime start9
eventOut SFTime start10
eventOut SFTime start11
eventOut SFTime start12
eventOut SFTime stop_star
eventOut SFTime stop1
eventOut SFTime stop2
eventOut SFTime stop3
eventOut SFTime stop4
eventOut SFTime stop5
eventOut SFTime stop6
eventOut SFTime stop7
eventOut SFTime stop8
eventOut SFTime stop9
eventOut SFTime stop10
eventOut SFTime stop11
eventOut SFTime stop12
eventOut SFTime start_water
eventOut SFBool enable_water
url "vrmlscript:
    function startTime(t)
    {
          start_water=t;
          start_star=t;
          start1=t+1;
          start2=t+0.4+1;
          start3=t+0.8+1;
          start4=t+1.2+1;
          start5=t+1.6+1;
          start6=t+2+1;
          start7=t+2.4+1;
          start8=t+2.8+1;
          start9=t+3.2+1;
          start10=t+3.6+1;
          start11=t+4+1;
          start12=t+4.4+1;
    }
    function stopTime(t)
    {
          enable_water=FALSE;
          stop1=t;
          stop2=t+0.4;
          stop3=t+0.8;
          stop4=t+1.2;
          stop5=t+1.6;
          stop6=t+2;
          stop7=t+2.4;
          stop8=t+2.8;
          stop9=t+3.2;
          stop10=t+3.6;
          stop11=t+4;
          stop12=t+4.4;
          stop_star=t+5.6;
        }

        function water_active(a,t)
        {
          if (!a) enable_water=TRUE; 
        }
    "
}
DEF TT-TIMER TimeSensor { loop TRUE cycleInterval 5 enabled FALSE}
DEF TT-SCRIPT Script {
eventIn SFFloat frac
eventOut SFVec2f tt_out
url "vrmlscript:
    function frac (a,t) { tt_out[0]=-a; tt_out[1]=0; }
"}
]} #collide
]}
]}#END POSITIONING TRANSFORM

ROUTE TT-TIMER.fraction_changed TO TT-SCRIPT.frac
ROUTE TT-SCRIPT.tt_out TO WATER-TT.set_translation
ROUTE ENTER-PROXY.isActive TO TT-TIMER.enabled
ROUTE ENTER-PROXY.enterTime TO S.startTime
ROUTE ENTER-PROXY.exitTime TO S.stopTime
ROUTE S.start_water TO TIMER.startTime
ROUTE TIMER.isActive TO S.water_active
ROUTE S.start1 TO TIMER1.startTime
ROUTE S.start2 TO TIMER2.startTime
ROUTE S.start3 TO TIMER3.startTime
ROUTE S.start4 TO TIMER4.startTime
ROUTE S.start5 TO TIMER5.startTime
ROUTE S.start6 TO TIMER6.startTime
ROUTE S.start7 TO TIMER7.startTime
ROUTE S.start8 TO TIMER8.startTime
ROUTE S.start9 TO TIMER9.startTime
ROUTE S.start10 TO TIMER10.startTime
ROUTE S.start11 TO TIMER11.startTime
ROUTE S.start12 TO TIMER12.startTime
ROUTE TIMER1.fraction_changed TO STR1-SC.set_fraction
ROUTE TIMER2.fraction_changed TO STR2-SC.set_fraction
ROUTE TIMER3.fraction_changed TO STR3-SC.set_fraction
ROUTE TIMER4.fraction_changed TO STR4-SC.set_fraction
ROUTE TIMER5.fraction_changed TO STR5-SC.set_fraction
ROUTE TIMER6.fraction_changed TO STR6-SC.set_fraction
ROUTE TIMER7.fraction_changed TO STR7-SC.set_fraction
ROUTE TIMER8.fraction_changed TO STR8-SC.set_fraction
ROUTE TIMER9.fraction_changed TO STR9-SC.set_fraction
ROUTE TIMER10.fraction_changed TO STR10-SC.set_fraction
ROUTE TIMER11.fraction_changed TO STR11-SC.set_fraction
ROUTE TIMER12.fraction_changed TO STR12-SC.set_fraction
ROUTE STR1-SC.value_changed TO STR.set_scale
ROUTE STR2-SC.value_changed TO STR2.set_scale
ROUTE STR3-SC.value_changed TO STR3.set_scale
ROUTE STR4-SC.value_changed TO STR4.set_scale
ROUTE STR5-SC.value_changed TO STR5.set_scale
ROUTE STR6-SC.value_changed TO STR6.set_scale
ROUTE STR7-SC.value_changed TO STR7.set_scale
ROUTE STR8-SC.value_changed TO STR8.set_scale
ROUTE STR9-SC.value_changed TO STR9.set_scale
ROUTE STR10-SC.value_changed TO STR10.set_scale
ROUTE STR11-SC.value_changed TO STR11.set_scale
ROUTE STR12-SC.value_changed TO STR12.set_scale
ROUTE S.stop1 TO TIMER_A1.startTime
ROUTE S.stop2 TO TIMER_A2.startTime
ROUTE S.stop3 TO TIMER_A3.startTime
ROUTE S.stop4 TO TIMER_A4.startTime
ROUTE S.stop5 TO TIMER_A5.startTime
ROUTE S.stop6 TO TIMER_A6.startTime
ROUTE S.stop7 TO TIMER_A7.startTime
ROUTE S.stop8 TO TIMER_A8.startTime
ROUTE S.stop9 TO TIMER_A9.startTime
ROUTE S.stop10 TO TIMER_A10.startTime
ROUTE S.stop11 TO TIMER_A11.startTime
ROUTE S.stop12 TO TIMER_A12.startTime
ROUTE TIMER_A1.fraction_changed TO STR_A1-SC.set_fraction
ROUTE TIMER_A2.fraction_changed TO STR_A2-SC.set_fraction
ROUTE TIMER_A3.fraction_changed TO STR_A3-SC.set_fraction
ROUTE TIMER_A4.fraction_changed TO STR_A4-SC.set_fraction
ROUTE TIMER_A5.fraction_changed TO STR_A5-SC.set_fraction
ROUTE TIMER_A6.fraction_changed TO STR_A6-SC.set_fraction
ROUTE TIMER_A7.fraction_changed TO STR_A7-SC.set_fraction
ROUTE TIMER_A8.fraction_changed TO STR_A8-SC.set_fraction
ROUTE TIMER_A9.fraction_changed TO STR_A9-SC.set_fraction
ROUTE TIMER_A10.fraction_changed TO STR_A10-SC.set_fraction
ROUTE TIMER_A11.fraction_changed TO STR_A11-SC.set_fraction
ROUTE TIMER_A12.fraction_changed TO STR_A12-SC.set_fraction
ROUTE STR_A1-SC.value_changed TO STR.set_scale
ROUTE STR_A2-SC.value_changed TO STR2.set_scale
ROUTE STR_A3-SC.value_changed TO STR3.set_scale
ROUTE STR_A4-SC.value_changed TO STR4.set_scale
ROUTE STR_A5-SC.value_changed TO STR5.set_scale
ROUTE STR_A6-SC.value_changed TO STR6.set_scale
ROUTE STR_A7-SC.value_changed TO STR7.set_scale
ROUTE STR_A8-SC.value_changed TO STR8.set_scale
ROUTE STR_A9-SC.value_changed TO STR9.set_scale
ROUTE STR_A10-SC.value_changed TO STR10.set_scale
ROUTE STR_A11-SC.value_changed TO STR11.set_scale
ROUTE STR_A12-SC.value_changed TO STR12.set_scale
ROUTE S.start_star TO STAR-TIMER.startTime
ROUTE S.stop_star TO STAR-TIMER1.startTime
ROUTE STAR-TIMER.fraction_changed TO STAR-POS.set_fraction
ROUTE STAR-TIMER1.fraction_changed TO STAR-POS1.set_fraction
ROUTE STAR-POS.value_changed TO STAR.set_translation
ROUTE STAR-POS1.value_changed TO STAR.set_translation
}#END fountain PROTO

DEF mainRoot Group {
children[

DEF frameLoader Script{
field MFString loadUrl [ "" ]
field MFString loadParam [ "" ]
url "vrmlscript:
function initialize(){
# loadUrl[0] = '/cgi-bin/cybertown/place?plc=funpark&ac=action';
# loadParam[0] = 'target=action';
# Browser.loadURL(loadUrl, loadParam);
}
"}

DEF SharedZone BlaxxunZone{
events[
DEF SGfireTime SharedEvent{name "SGfireTime"}
DEF SGhitTime SharedEvent{name "SGhitTime"}
DEF SGscore SharedEvent{name "SGscore"}
DEF SGreset SharedEvent{name "SGreset"}

DEF BGthrow SharedEvent{name "BGthrow"}
DEF BGname SharedEvent{name "BGname"}
DEF BGdrop SharedEvent{name "BGdrop"}
DEF BGstopPosition SharedEvent{name "BGstopPosition"}
DEF BGscore SharedEvent{name "BGscore"}
DEF BGreset SharedEvent{name "BGreset"}

DEF XmasLight SharedEvent{name "XmasLight"}
]
}


DEF enter Viewpoint{ 
position 30 1.7 0
orientation 0 1 0 1.4
description "Enter" 
}
DEF nav NavigationInfo {
headlight FALSE
avatarSize       [ 0.25, 1.7, 0.5 ]
type "WALK"
speed 1.0
}

DEF light1 DirectionalLight{direction 1 -1 1}
DEF light2 DirectionalLight{direction -1 -1 1}
DEF light3 DirectionalLight{direction 0 -.5 -1}

DEF landscape Transform {children [
Shape {
appearance Appearance {texture ImageTexture{url"images/dirt.jpg"}textureTransform TextureTransform{scale 6 1}}
geometry Extrusion {beginCap FALSE crossSection [-123 13.5,-17.1 45,22.5 89.1,64.8 89.1,85.5 55.8,123 37.8,123 -32.4,95.4 -57.6,79.2 -89.1,9.9 -89.1,-123 -39.6,-123 13.5,]spine[0 0 0,0 -90 0,0 -270 0]scale[1 1,.5 .5,.01 .01]}
}
DEF grass Shape {
appearance Appearance {texture ImageTexture{url"images/floor.jpg"}textureTransform TextureTransform{scale 10 10}}
geometry IndexedFaceSet {convex FALSE ccw FALSE coord DEF landCoords Coordinate {point [123.3 0 2.7,123.3 0 -20.7,7.2 0 -20.7,7.2 0 -43.2,-38.7 0 -43.2,-38.7 0 -89.1,-61.2 0 -89.1,-61.2 0 89.1,-38.7 0 89.1,-38.7 0 25.2,7.2 0 25.2,7.2 0 2.7,-61.2 0 -43.2,-61.2 0 25.2,-108.9 0 -43.2,-108.9 0 25.2,123.3 0 13.5,17.1 0 45,-22.5 0 89.1,-64.8 0 89.1,-85.5 0 55.8,-123.3 0 37.8,-123.3 0 -32.4,-95.4 0 -57.6,-79.2 0 -89.1,-9.9 0 -89.1,123.3 0 -39.6,-118.8 0 -9]}coordIndex [0,16,17,18,8,9,10,11,-1,19,20,21,22,23,24,6,12,14,27,15,13,7,-1,1,2,3,4,5,25,26,-1]}
}
DEF walks Shape {
appearance Appearance {texture ImageTexture{url"images/tile.jpg"}textureTransform TextureTransform{scale 10 10 }}
geometry IndexedFaceSet {coord USE landCoords coordIndex [0,1,2,11,-1,2,3,4,14,27,15,9,10,11,-1,4,5,6,12,-1,13,7,8,9,-1]}
}

DEF walls Shape{
appearance Appearance{texture ImageTexture{url"images/stone.gif"}textureTransform TextureTransform{scale 4 1}}
geometry IndexedFaceSet{coord Coordinate{point [7.4 0 -21.7,7.2 1.5 -20.7,9.0 0 -21.7,9.2 1.5 -20.7,9.0 0 -42.2,9.2 1.5 -43.2,7.4 0 -42.2,7.2 1.5 -43.2,-37.7 0 -43.4,-38.7 1.5 -43.2,-37.7 0 -45,-38.7 1.5 -45.2,6.2 0 -45,7.2 1.5 -45.2,6.2 0 -43.4,7.2 1.5 -43.2,7.4 0 24.2,7.2 1.5 25.2,9.0 0 24.2,9.2 1.5 25.2,9.0 0 3.7,9.2 1.5 2.7,7.4 0 3.7,7.2 1.5 2.7,-37.7 0 27.0,-38.7 1.5 27.2,-37.7 0 25.4,-38.7 1.5 25.2,6.2 0 25.4,7.2 1.5 25.2,6.2 0 27.0,7.2 1.5 27.2,]}coordIndex[1,3,5,7,-1,1,0,2,3,-1,3,2,4,5,-1,5,4,6,7,-1,7,6,0,1,-1,15,13,11,9,-1,11,10,8,9,-1,13,12,10,11,-1,15,14,12,13,-1,9,8,14,15,-1,17,19,21,23,-1,17,16,18,19,-1,19,18,20,21,-1,21,20,22,23,-1,23,22,16,17,-1,31,29,27,25,-1,27,26,24,25,-1,29,28,26,27,-1,31,30,28,29,-1,25,24,30,31,-1]
	texCoord TextureCoordinate{point[0 1,0 0,1 0,1 1,0 1,0 .25,1 .25,1 1]}texCoordIndex[4,5,6,7,-1,0,1,2,3,-1,0,1,2,3,-1,0,1,2,3,-1,0,1,2,3,-1,4,5,6,7,-1,0,1,2,3,-1,0,1,2,3,-1,0,1,2,3,-1,0,1,2,3,-1,4,5,6,7,-1,0,1,2,3,-1,0,1,2,3,-1,0,1,2,3,-1,0,1,2,3,-1,4,5,6,7,-1,0,1,2,3,-1,0,1,2,3,-1,0,1,2,3,-1,0,1,2,3,-1]}
}#END walls
]}#END landscape

#!!!!!!!!!!!!!!!!!BEGIN Pavillion
DEF pavillion Transform{translation -90 0 -10 children [
Transform{ children [
DEF smallRoof Shape {
appearance Appearance {material DEF roofColor Material{transparency .3 diffuseColor 0 .2 0 specularColor 1 1 .2 emissiveColor 0 0 .1 shininess 1}}
#texture ImageTexture{url "images/top.jpg"}
#textureTransform TextureTransform{scale 2 1}
geometry Extrusion {beginCap FALSE endCap FALSE solid FALSE creaseAngle 1 crossSection [-3 -8.5,-4.41 -8.5,-9 -4.41,-9 4.41,-4.41 8.5,-3 8.5,]spine[30 9 0,57 9 0]scale[1 1,1 1]orientation[0 0 1 .8,0 0 1 -.8]}}
]}
DEF roof Shape {
appearance Appearance {material USE roofColor}
#texture ImageTexture{url "images/top.jpg"}
#textureTransform TextureTransform{scale 4 1 rotation 3.142 }
geometry Extrusion {beginCap FALSE creaseAngle 1 solid FALSE crossSection [14.7 30,30 14.7,30 -14.7,14.7 -30,-14.7 -30,-30 -14.7,-30 14.7,-14.7 30,14.7 30]spine[0 11 0,0 16 0,0 19 0,0 21 0,0 23 0]scale[1 1,.75 .75,.5 .5,.15 .15,.1 .1]}
}
DEF roofTrim Shape {
appearance Appearance {material DEF steel Material {ambientIntensity  .3 diffuseColor .36 .38 .33 specularColor 1 1 1 emissiveColor 0 0 0.1 shininess .1}}
geometry Extrusion {creaseAngle 3 crossSection [-.5 -1,.5 -1,1 -.75,1 -.25,.5 0,-.5 0,-1 -.25,-1 -.75,-.5 -1]spine[14.7 11 30,30 11 14.7,30 11 -14.7,14.7 11 -30,-14.7 11 -30,-30 11 -14.7,-30 11 14.7,-14.7 11 30,14.7 11 30]}
}
DEF domeArch Transform{translation 0 0 23 children[
DEF arch Shape {
appearance Appearance {texture ImageTexture{url"images/stone.gif"}}
geometry IndexedFaceSet {coord Coordinate {point [9.33 11 0,9.33 11 -2.2,-9.33 11 0,-9.33 11 -2.2,-9.33 9.5 0,-9.33 9.5 -2.2,-3.33 8 0,-3.33 8 -2.2,3.33 8 0,3.33 8 -2.2,9.33 9.5 0,9.33 9.5 -2.2,1.55 0 0,1.55 0 -1.5,-1.55 0 0,-1.55 0 -1.5,]}coordIndex [0,2,4,6,8,10,-1,11,9,7,5,3,1,-1,0,1,3,2,-1,2,3,5,4,-1,4,5,7,6,-1,8,9,11,10,-1,10,11,1,0,-1,8,6,14,12,-1,13,15,7,9,-1,12,13,9,8,-1,6,7,15,14,-1]texCoord TextureCoordinate{point[1 1,0 1,0 .3,1 .3,0 .8,1 .8,0 .3,1 .3,.25 0,.75 0,0 0,1 0,0 .2,1 .2]}texCoordIndex[5,4,6,8,9,7,-1,7,9,8,6,4,5,-1,13,12,6,7,-1,1,0,6,7,-1,13,12,10,11,-1,11,10,12,13,-1,7,6,0,1,-1,0,1,2,3,-1,3,2,1,0,-1,3,2,1,0,-1,0,1,2,3,-1]}
}#END arch
Shape {
appearance Appearance {material USE steel}
geometry Extrusion {creaseAngle 3 crossSection [-.25 -1,.25 -1,.5 -.75,.5 -.25,.25 0,-.25 0,-.5 -.25,-.5 -.75,-.25 -1]spine[0 10 10,10 15 -10,0 20 -25,-10 15 -10,0 10 10]}
}
]}#END domeArch
Transform{translation 0 32 0 children Shape{appearance Appearance{material USE steel}geometry Cone{bottomRadius 1 height 30}}}
Transform{scale 1 .5 1 translation 0 27 0 children Shape{appearance Appearance{material USE steel}geometry Sphere{radius 2}}}
Transform{scale 1 .4 1 translation 0 24 0 children Shape{appearance Appearance{material USE steel}geometry Sphere{radius 5}}}
Transform{rotation 0 1 0 .7855 children USE domeArch}
Transform{rotation 0 1 0 2.3565 children USE domeArch}
Transform{rotation 0 1 0 3.142 children USE domeArch}
Transform{rotation 0 1 0 -2.3565 children USE domeArch}
Transform{rotation 0 1 0 -1.571 children USE domeArch}
Transform{rotation 0 1 0 -.7855 children USE domeArch}
Transform{translation 32 0 9.33 rotation 0 1 0 0 children USE arch}
Transform{translation 32 0 -9.33 rotation 0 1 0 3.142 children USE arch}
Transform{translation 50 0 9.33 rotation 0 1 0 0 children USE arch}
Transform{translation 50 0 -9.33 rotation 0 1 0 3.142 children USE arch}
]}
#!!!!!!!!!!!!!!END Pavillion

Fountain{position -20 .5 -10 scale 1.5 1.5 1.5}
Transform{translation -20 .5 -10 children[
Sound{intensity 1  source AudioClip{loop TRUE  url"sounds/fount1.wav"}spatialize TRUE maxBack 100 maxFront 100 minBack 1 minFront 1}
]}



      


#Group{
#children[

# CacheFooler{url "/cgi-bin/games/fool/fool_j4_fun.pl"}

#]}


FerrisWheel{position 40 31.5 -40 scale 1.5 1.5 1.5}

Lamp{position 20 0 2 rotation 0 1 0 3.142}
Lamp{position 50 0 -19 rotation 0 1 0 0}
Lamp{position 80 0 2 rotation 0 1 0 3.142}
Lamp{position 100 0 -19 rotation 0 1 0 0}
Lamp{position 6 0 -42.2 rotation 0 1 0 -.7855}
Lamp{position 6 0 24.2 rotation 0 1 0 3.9275}

ParkBench{position 75 0 2 rotation 0 1 0 3.142}
ParkBench{position 15 0 2 rotation 0 1 0 3.142}
ParkBench{position 42 0 -19}
ParkBench{position 103 0 -19}

Tree{position 10 0 1}
Tree{position 40 0 1}
Tree{position 70 0 1}
Tree{position 100 0 1}
Tree{position 15 0 -19}
Tree{position 45 0 -19}
Tree{position 75 0 -19}
Tree{position 105 0 -19}
Tree{position -75 0 -45}
Tree{position -100 0 -45}
Tree{position -120 0 -25}
Tree{position -75 0 29}
Tree{position -100 0 29}
Tree{position -120 0 9}

]}#END mainRoot

DEF poolSign Transform {translation 8 0 -20 scale 4 4 4 children [
DEF poolButton TouchSensor{}
DEF stake Shape {
appearance Appearance {material Material{transparency 0 diffuseColor .5 .3 .1 specularColor .7 .7 0 emissiveColor .5 .3 .1 shininess 0}}
geometry IndexedFaceSet {ccw TRUE convex TRUE solid TRUE creaseAngle 3 coord Coordinate {point [.075 .547 -.016,.075 .547 .016,.021 -.013 -.01,.021 -.013 .01,.048 .547 -.031,.005 -.013 -.019,.021 .547 -.016,-.012 -.013 -.01,.021 .547 .016,-.012 -.013 .01,.048 .547 .031,.005 -.013 .019,.095 .688 -.027,.048 .688 -.053,.002 .688 -.027,.002 .688 .027,.048 .688 .053,.095 .688 .027]}coordIndex [12,1,0,-1,17,1,12,-1,17,10,1,-1,16,10,17,-1,16,8,10,-1,15,8,16,-1,15,6,8,-1,14,6,15,-1,14,4,6,-1,13,4,14,-1,13,0,4,-1,12,0,13,-1,3,10,11,-1,1,10,3,-1,11,8,9,-1,10,8,11,-1,9,8,7,-1,8,6,7,-1,7,6,5,-1,6,4,5,-1,5,4,2,-1,4,0,2,-1,2,1,3,-1,0,1,2,-1]}
}
DEF arrow Shape {
appearance Appearance {material Material{transparency 0 diffuseColor .5 .3 .1 specularColor .7 .7 0 emissiveColor .5 .3 .1 shininess 0}}
geometry IndexedFaceSet {coord Coordinate {point [-.174 .572 -.05,-.174 .572 .05,.176 .637 .05,.176 .637 -.05,.162 .712 .05,.162 .712 -.05,.339 .589 -.05,.339 .589 .05,.217 .412 -.05,.217 .412 .05,.203 .487 -.05,.203 .487 .05,-.146 .423 .05,-.146 .423 -.05]}coordIndex [1,12,2,-1,2,12,7,-1,11,7,12,-1,9,7,11,-1,4,2,7,-1,13,0,3,-1,13,3,6,-1,6,10,13,-1,6,8,10,-1,3,5,6,-1,13,1,0,-1,13,12,1,-1,10,12,13,-1,10,11,12,-1,9,11,10,-1,8,9,10,-1,7,9,8,-1,6,7,8,-1,4,7,6,-1,5,4,6,-1,3,4,5,-1,3,2,4,-1,0,2,3,-1,0,1,2,-1]}
}
DEF toPool Transform{translation 0.05 .5125 .07 rotation 0 0 1 0.2 children[
DEF tp Shape{
appearance Appearance {material Material{diffuseColor 0 0 0}}
geometry Text{ string ["To Pool"] fontStyle FontStyle{ size .08 justify "MIDDLE" style "BOLD"}}
}
Transform {translation 0 -.04 0
children Shape{
appearance Appearance {material Material{diffuseColor 0 0 0}}
geometry Text{string ["Click Here"] fontStyle FontStyle{ size .03 family "SANS" justify "MIDDLE" style "BOLD"}}
}}
]}
###### REQUIRES PROPER URL AND TARGET--LOADS POOL
DEF poolLinker Script{
 eventIn SFBool link
 field MFString loadUrl [ "/#/place/pool" ]
 field MFString loadParam [ "" ]
 url "vrmlscript:function link(v) {if(!v){return;}Browser.loadURL(loadUrl, loadParam);}"
}
##########################################
]}#END POOLSIGN
ROUTE poolButton.isActive TO poolLinker.link




#BEGIN SHOOTING GALLERY ISLAND
Transform{ translation -50 -10 187 rotation 0 1 0 1.571 children Bridge{ position 0 0 0 rotation 0 0 1 .1 scale 1 1 1}}
Transform{
translation -50 -20 325
children[
Viewpoint{position 0 1.7 -14 orientation 0 1 0 3.142 description "Shooting Gallery"}
Shape {
appearance Appearance {texture ImageTexture{url "images/dirt.jpg"}textureTransform TextureTransform{scale 5 1}}
geometry Extrusion{beginCap FALSE 
crossSection [-39.42 15.66,-15.12 39.96,39.42 4.68,15.12 -39.96,-31.86 -39.96,-39.42 15.66]spine[0 0 0,0 -20 0,0 -60 0]scale[1 1,.5 .5,.1 .1]}
}
Shape {
appearance Appearance {texture ImageTexture{url "images/floor.jpg"}textureTransform TextureTransform{scale 3 3}}
geometry IndexedFaceSet {coord Coordinate {point [39.42 0 15.66,31.86 0 -39.96,-15.12 0 -39.96,-39.42 0 4.68,15.12 0 39.96]}coordIndex [3,4,0,-1,0,2,3,-1,0,1,2,-1]}
}

Tent{}
DEF SGGroup Transform{translation 0 1.6 -2}
DEF SGProx ProximitySensor{size 120 50 120 center 0 0 0}
]}
DEF SGadd Script{
eventIn SFBool set_isActive
field SFNode SGfireTime USE SGfireTime
field SFNode SGhitTime USE SGhitTime
field SFNode SGreset USE SGreset
field SFNode SGscore USE SGscore
field MFNode SG []
field SFNode SGGroup USE SGGroup
url"vrmlscript:
function set_isActive(v,t){
if(!v){
 if(SG != null){ 
  SGGroup.removeChildren = SG;
  Browser.deleteRoute(SG,'fireTime_changed',SGfireTime,'set_time');
  Browser.deleteRoute(SG,'hitTime_changed',SGhitTime,'set_time');
  Browser.deleteRoute(SG,'reset_changed',SGreset,'set_bool');
  Browser.deleteRoute(SG,'score_changed',SGscore,'set_string');
  Browser.deleteRoute(SGfireTime,'time_changed',SG,'set_fireTime');
  Browser.deleteRoute(SGhitTime,'time_changed',SG,'set_hitTime');
  Browser.deleteRoute(SGreset,'bool_changed',SG,'set_reset');
  Browser.deleteRoute(SGscore,'string_changed',SG,'set_score');
 }
 else{return;}
}
else{
 thisString = 'DEF SG ShootingGallery{position -50 -18.4 323}';
 SG = Browser.createVrmlFromString(thisString);
 SGGroup.addChildren = SG;
 Browser.addRoute(SG,'fireTime_changed',SGfireTime,'set_time');
 Browser.addRoute(SG,'hitTime_changed',SGhitTime,'set_time');
 Browser.addRoute(SG,'reset_changed',SGreset,'set_bool');
 Browser.addRoute(SG,'score_changed',SGscore,'set_string');
 Browser.addRoute(SGfireTime,'time_changed',SG,'set_fireTime');
 Browser.addRoute(SGhitTime,'time_changed',SG,'set_hitTime');
 Browser.addRoute(SGreset,'bool_changed',SG,'set_reset');
 Browser.addRoute(SGscore,'string_changed',SG,'set_score'); 
}
}
"}
ROUTE SGProx.isActive TO SGadd.set_isActive


#END SHOOTING GALLERY ISLAND


#BEGIN BALLGAME ISLAND

#BALLGAME!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!

PROTO InterpolatedBallisticObject[
eventIn SFRotation set_ballisticPosition
eventIn SFVec3f set_position
field MFNode children []
field SFTime maxInterval .5
field SFFloat maxDistance 30
field SFVec3f initialPosition 0 0 0
eventOut SFVec3f stopPosition
]{
Group{
children [
DEF BO Transform {
translation IS set_position
children [
DEF objectGeometry Group{children IS children}

]}#end BO

DEF BOClock TimeSensor{loop FALSE enabled TRUE cycleInterval IS maxInterval}
DEF BOInterp PositionInterpolator{key[0,.1,.2,.3,.4,.5,.6,.7,.8,.9,1]}

#+++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++
DEF BallisticPath Script{
eventIn SFRotation set_ballisticPosition IS set_ballisticPosition
eventIn SFBool set_stop
field SFFloat maxDistance IS maxDistance
field SFVec3f stop_stored IS initialPosition
field MFVec3f kv []
eventOut SFVec3f position_changed
eventOut SFTime interval_changed
eventOut MFVec3f values_changed
eventOut SFTime startTime_changed
eventOut SFVec3f stopPosition IS stopPosition

url"vrmlscript:
function initialize(){
 position_changed = stop_stored;
 for(i = 0;i <= 10;i++){
  kv[i] = new SFVec3f(0,Math.sin(i*.3142),i*(maxDistance/-10));
 }
}
function set_ballisticPosition(v,t){
  pos = new SFVec3f(v[0],v[1],v[2]);
  or = new SFRotation(0,1,0,Math.round(v[3]/100)/100);
  force = Math.abs(v[3])/100 - Math.floor(Math.abs(v[3]/100)); 
  //Browser.print('Received: '+v[3]+'   '+Math.abs(v[3])/100+' - '+Math.floor(Math.abs(v[3]/100))+'='+force);
  for(i = 0;i <= 10;i++){
   values_changed[i] = pos.add(or.multVec(kv[i].multiply(force)));
  }
  stop_stored = values_changed[10];
  startTime_changed = t;
}
function set_stop(v,t){
if(v){return;}
 stopPosition =  stop_stored;
}
"}#END BallisticPath
#+++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++
]}#END main PROTO Group
ROUTE BallisticPath.position_changed TO BO.set_translation
ROUTE BallisticPath.interval_changed TO BOClock.set_cycleInterval
ROUTE BallisticPath.values_changed TO BOInterp.set_keyValue
ROUTE BallisticPath.startTime_changed TO BOClock.set_startTime
ROUTE BOClock.fraction_changed TO BOInterp.set_fraction
ROUTE BOInterp.value_changed TO BO.set_translation
ROUTE BOClock.isActive TO BallisticPath.set_stop
#ROUTE BallisticPath.stopPosition TO BO.set_translation               
}#END BallisticObject PROTO

PROTO ThrowControl[
 exposedField SFBool enabled FALSE
 field SFFloat maxForce 20
 field SFVec3f position 0 0 0
 field SFRotation rotation 0 1 0 0
 eventOut SFBool triggered
 eventOut SFRotation throw_changed
]{
DEF Positioning Transform{
translation IS position rotation IS rotation
children[ Collision{collide FALSE children[
Shape{
appearance Appearance{material Material{diffuseColor 0 0 .5 specularColor 1 1 1}}
geometry Cylinder{radius .01 height .25}
}
DEF SliderGroup Group{children[
DEF Slider Transform{
translation 0 .125 0 children[
Shape{
appearance Appearance{material Material{diffuseColor 1 0 0 specularColor 1 1 1}}
geometry Sphere{radius .0625}
}
]}#END Slider
DEF SlideSensor PlaneSensor{autoOffset FALSE offset 0 .125 0 enabled IS enabled minPosition 0 -.125 maxPosition 0 .125}
]}#END SliderGroup
]}#END Collision
DEF SliderScript Script{
eventIn SFVec3f set_translation
eventIn SFBool set_isActive
field SFFloat maxForce IS maxForce
field SFFloat currentPosition .125
eventOut SFBool triggered IS triggered
eventOut SFRotation throw_changed IS throw_changed
eventOut SFVec3f translation_changed
eventOut SFVec3f offset_changed
url"vrmlscript:
 function set_translation(v,t){
  currentPosition = v[1];
  translation_changed = new SFVec3f(0,v[1],0);
 }
 function set_isActive(v,t){
  if(v){return;}
  if(Browser.viewpointOrientation[1] != 0){ or = Math.round(100*(Browser.viewpointOrientation[3]))*100; sign = Browser.viewpointOrientation[1];}
  else{ or = 0; sign = 1;}
  force = Math.round((maxForce*((.125 - currentPosition)*4))*100);

  if(force > 99){force = 99;}
  pos = Browser.viewpointPosition;
  //Browser.print(currentPosition+'     '+force+'    '+or);
  throw_changed = new SFRotation(pos[0],0,pos[2],(or+force)*sign); 
  triggered = true;
  translation_changed = new SFVec3f(0,.125,0);
  offset_changed = new SFVec3f(0,.125,0);
 }
"}
]}#END Positioning
ROUTE SlideSensor.translation_changed TO SliderScript.set_translation
        ROUTE SliderScript.translation_changed TO Slider.set_translation
        ROUTE SliderScript.offset_changed TO SlideSensor.set_offset
ROUTE SlideSensor.isActive TO SliderScript.set_isActive
}#END ThrowControl PROTO

#END BALLGAME!!!!!!!!!!!!!!!!!!!!!!!!!!!!!! 


PROTO BallGame[
field SFVec3f position 0 0 0
field SFRotation rotation 0 1 0 0
eventIn SFRotation set_throw
eventIn SFString set_whoGotBall
eventIn SFVec3f set_stopPosition
eventIn SFVec2f set_score
eventIn SFBool set_dropBall
eventOut SFRotation throw_changed
eventOut SFString whoGotBall_changed
eventOut SFVec3f stopPosition_changed
eventOut SFVec2f score_changed
eventOut SFBool dropBall_changed
]{               
DEF main Transform{
translation IS position
rotation IS rotation
children[
DEF HUDProx ProximitySensor{size 500 50 500}
DEF HUD Transform{children[
DEF controlSwitch Switch{ whichChoice -1 choice[
DEF control ThrowControl{
throw_changed IS throw_changed
position 1 .25 -3
maxForce 1
}]}#END Switch
]}#END HUD Transform

DEF DBDelayClock TimeSensor{cycleInterval 5 loop FALSE enabled TRUE}
DEF DBClock TimeSensor{cycleInterval 1 loop FALSE enabled TRUE}
DEF DBInterp PositionInterpolator{key[0,1] keyValue[]}

DEF ballScript Script{
eventIn SFBool gotBall
eventIn SFString checkGotBall IS set_whoGotBall

eventIn SFBool set_throw
eventIn SFRotation gotThrow IS set_throw 

eventIn SFVec3f set_stopPosition

eventIn SFBool set_dropBallDelay IS set_dropBall
eventIn SFBool set_dropBall

eventIn SFVec2f score_received IS set_score

field SFVec3f offset IS position
field SFVec3f goalPosition1 0 0 -75
field SFVec3f goalPosition2 0 0 75
field SFVec2f score 0 0
field SFString lastName ""

eventOut SFInt32 ballChoice_changed
eventOut SFBool ballProx_enabled
eventOut SFInt32 throwChoice_changed
eventOut SFBool throw_enabled
eventOut SFVec3f collidePos

eventOut SFString whoGotBall IS whoGotBall_changed
eventOut SFVec3f stopPosition_changed IS stopPosition_changed
eventOut SFVec3f stopPosition
eventOut SFVec2f point_scored IS score_changed

eventOut MFVec3f dropBallKeys
eventOut SFBool dropBall IS dropBall_changed
eventOut SFTime dropBallDelayTime_changed
eventOut SFTime dropBallTime_changed
eventOut SFTime outTime_changed
url"vrmlscript:
function initialize(){
goalPosition1 = offset.add(goalPosition1);
goalPosition2 = offset.add(goalPosition2);
 key1 = new SFVec3f(offset[0],offset[1]+20,offset[2]);
dropBallKeys=new MFVec3f(key1,offset);
}
function enableThrow(v){
 if(v){
  throwChoice_changed = 0;
  throw_enabled = true;
  collidePos = Browser.viewpointPosition; 
 }
 else{
  throwChoice_changed = -1;
  throw_enabled = false;
  collidePos = new SFVec3f(0,-50,0); 
 }
}
function enableBall(v){
 if(v){
  ballChoice_changed = 0;
  ballProx_changed = true;
 }
 else{
  ballChoice_changed = -1;
  ballProx_changed = false;
 }
}
function gotBall(v,t){
 if(!v){return;}
 else{
  enableBall(false);
  whoGotBall = Browser.myAvatarName;
 }
}
function checkGotBall(v,t){
 if(v == Browser.myAvatarName){
  enableThrow(true);
  lastName = v;
 }
 else{
  enableBall(false);
  enableThrow(false);
  lastName = v;  
 }
}
function set_throw(v,t){
 if(v){return;}
 enableThrow(false);
}
function gotThrow(v,t){
 enableThrow(false);
 enableBall(true);
}
function startDropBall(t){
   enableThrow(false);
   enableBall(false);  
   stopPosition = new SFVec3f(offset[0],offset[1]+20,offset[2]);
   dropBall = true;
}
function set_stopPosition(v,t){
  stopPosition = v;
  if(lastName == Browser.myAvatarName && v.subtract(goalPosition1).length() <= 10){
   point_scored = new SFVec2f(score[0]+1,score[1]);
   startDropBall(t);
   return;
  }
  if(lastName == Browser.myAvatarName && v.subtract(goalPosition2).length() <= 10){
   point_scored = new SFVec2f(score[0],score[1]+1);
   startDropBall(t);
   return;
  }
  if(v[0] < offset[0]-37.5 || v[0] > offset[0]+37.5 || v[2] < offset[2]-75 || v[2] > offset[2]+75){
  outTime_changed = t;
  startDropBall(t);
  }
}
function set_dropBallDelay(v,t){
 if(!v){return;}
 enableBall(false);
 dropBallDelayTime_changed = t;
}
function set_dropBall(v,t){
 if(v){return;}
 enableBall(true);
 dropBallTime_changed = t;
}
function score_received(v){
 score = v;
}
"}
Sound {intensity 1 direction 1 1 1 maxBack 1000 maxFront 1000 minBack 10 minFront 10 spatialize FALSE source DEF outSound AudioClip {pitch .75 loop FALSE url "sounds/saw.wav"}}

]}#END main Transform

DEF ball InterpolatedBallisticObject{
initialPosition IS position
set_ballisticPosition IS set_throw 
children [
DEF ballSwitch Switch{whichChoice 0 choice[
Transform{translation 0 .35 0 children[  
Shape{
appearance Appearance{material Material{diffuseColor 1 0 0 specularColor 0 0 1}}
geometry Sphere{radius .35}
}
DEF ballProx ProximitySensor{size 1.5 5 1.5}
]}
]}#end Switch
]}#END BallisticObject

DEF stopRun Transform{children[
DEF runCollide Collision{collide FALSE children[
Shape{
appearance Appearance{material Material{transparency 1}}
geometry IndexedFaceSet{coord Coordinate{point[.35 -2 .35,-.35 -2 .35,-.35 -2 -.35,.35 -2 -.35,.35 2 .35,-.35 2 .35,-.35 2 -.35,.35 2 -.35]}coordIndex[1,0,4,5,-1,2,1,5,6,-1,3,2,6,7,-1,0,3,7,4,-1]}
}
]}#END runCollide
]}#END stopRun

ROUTE HUDProx.position_changed TO HUD.set_translation
ROUTE HUDProx.orientation_changed TO HUD.set_rotation

ROUTE control.triggered TO ballScript.set_throw

ROUTE ball.stopPosition TO ballScript.set_stopPosition

ROUTE ballProx.isActive TO ballScript.gotBall

ROUTE ballScript.ballProx_enabled TO ballProx.set_enabled
ROUTE ballScript.ballChoice_changed TO ballSwitch.set_whichChoice
ROUTE ballScript.throw_enabled TO control.set_enabled
ROUTE ballScript.throwChoice_changed TO controlSwitch.set_whichChoice
ROUTE ballScript.collidePos TO stopRun.set_translation
ROUTE ballScript.throw_enabled TO runCollide.set_collide

ROUTE ballScript.dropBallKeys TO DBInterp.set_keyValue
ROUTE ballScript.dropBallDelayTime_changed TO DBDelayClock.set_startTime
ROUTE DBDelayClock.isActive TO ballScript.set_dropBall
ROUTE ballScript.dropBallTime_changed TO DBClock.set_startTime
ROUTE DBClock.fraction_changed TO DBInterp.set_fraction
ROUTE DBInterp.value_changed TO ball.set_position

ROUTE ballScript.outTime_changed TO outSound.set_startTime


#SHARED EVENTS
#ROUTE control.triggered TO ballScript.set_enable
#ROUTE ballScript.haveBallSent TO ballScript.set_enable
#ROUTE control.throw_changed TO ball.set_ballisticPosition
#ROUTE ballScript.stopPosition TO ball.set_position
#ROUTE ballScript.dropBall TO ballScript.set_dropBallDelay
}#END ballGame PROTO

Transform{translation 210 0 -9 rotation 0 1 0 3.142 children Bridge{ position 0 0 0 scale 1 1 1}}

Transform{
translation 400 0 0
children[
Viewpoint{position -100 1.7 20 orientation 0 1 0 -1.571 description "Soccer Game"}
Shape {
appearance Appearance {texture ImageTexture{url "images/dirt.jpg"}textureTransform TextureTransform{scale 6 1}}
geometry Extrusion{convex FALSE beginCap FALSE crossSection [115.228 138.577,115.2 -.743,97.198 -12.98,12.572 -138.602,-21.603 -16.915,-115.197 14.424,-23.733 130.325,49.703 113.39,115.228 138.577]spine[0 0 0,0 -100 0,0 -250 0]scale[1 1,.4 .4,.1 .1]}
}
Shape {
appearance Appearance {texture ImageTexture{url "images/floor.jpg"}textureTransform TextureTransform{scale 10 10}}
geometry IndexedFaceSet {convex TRUE coord Coordinate {point [-115.228 0 138.577,-115.2 0 -.743,-97.197 0 -12.98,-12.572 0 -138.602,21.604 0 -16.915,115.197 0 14.424,23.734 0 130.325,-49.703 0 113.39,-67.5 0 105,-67.5 0 -45,7.5 0 -45,7.5 0 105]}coordIndex [0,8,1,-1,1,8,2,-1,2,8,9,-1,2,9,3,-1,3,9,10,-1,3,10,4,-1,4,10,11,-1,4,11,5,-1,5,11,6,-1,6,11,7,-1,7,11,8,-1,7,8,0,-1]}
}
Shape {
appearance Appearance {texture ImageTexture{url "images/field.jpg"}textureTransform TextureTransform{ rotation 1.571 scale 10 10}}
geometry IndexedFaceSet {convex TRUE coord Coordinate {point [7.5 0 105,7.5 0 -45,-67.5 0 -45,-67.5 0 105]}coordIndex [0,1,2,3,-1]}
}
LOD{range[250] center -30 0 30  level[
Group{children[      # Group1
Transform{translation -30 0 105 children[
DEF goal Group{children[
Shape{
appearance Appearance{texture ImageTexture{url"images/fence.gif"}textureTransform TextureTransform{scale .9 1}}
geometry IndexedFaceSet{ solid FALSE coord Coordinate{point[11 0 0,7 0 10,-7 0 10,-11 0 0,11 10 0,7 10 10,-7 10 10,-11 10 0,]}coordIndex[0,1,5,4,-1,1,2,6,5,-1,2,3,7,6,-1]texCoord TextureCoordinate{point[1 0,0 0,0 1,1 1]}texCoordIndex[0,1,2,3,-1,0,1,2,3,-1,0,1,2,3,-1]}
}
Transform{translation 11 6 0
children DEF pole Group{ children[
Shape{appearance Appearance{material DEF steel Material {ambientIntensity  .3 diffuseColor .36 .38 .33 specularColor 1 1 1 emissiveColor 0 0 0.1 shininess .1}}geometry Cylinder{radius .1 height 12}}
Transform{translation 0 6 0 children Shape{appearance Appearance{material USE steel}geometry Sphere{radius .25}}}
]}#END pole
}
Transform{translation -11 6 0 children USE pole}
Transform{translation -7 6 10 children USE pole}
Transform{translation 7 6 10 children USE pole}
]}#END goal
Shape{
appearance Appearance{material Material{diffuseColor 0 0 .5}}
geometry Cylinder{radius 10 height 1}
}]}
Transform{translation -30 0 -45 children[
Transform{rotation 0 1 0 3.142 children USE goal}
Shape{
appearance Appearance{material Material{diffuseColor .5 0 0}}
geometry Cylinder{radius 10 height 1}
}]}
Transform{
translation -30 0 30
children Shape{
appearance Appearance{material Material{diffuseColor 1 1 1}}
geometry Cylinder{radius 2 height .025 side FALSE bottom FALSE}
}}
DEF ScoreBoard Transform{
translation 5 12 30
rotation 0 1 0 -1.571
children[
Transform{
children Shape{
appearance Appearance{material Material{diffuseColor 0 0 .2}}
geometry IndexedFaceSet{solid FALSE coord Coordinate{point[10 4.5 0,-10 4.5 0,-10 -4.5 0,10 -4.5 0]}coordIndex[0,1,2,3,-1]}
}}
Transform {translation 10 4.5 0
children DEF ball Shape{
appearance Appearance{material USE steel}
geometry Sphere{radius .8 }
}}
Transform {translation -10 4.5 0 children USE ball}
Transform {translation -10 -4.5 0 children USE ball}
Transform {translation 10 -4.5 0 children USE ball}
Transform {translation 10 -2 0  
children DEF rail Shape{
appearance Appearance{material USE steel}   
geometry Cylinder{radius .4 height 18.6}
}}
Transform {translation -10 -2 0  children USE rail}
Transform {translation 0 -4.5 0 rotation 0 0 1 1.571 children USE rail}
Transform {translation 0 4.5 0 rotation 0 0 1 1.571 children USE rail}
Transform{translation 0 .5 .5
children Shape{
appearance Appearance{}
geometry Text{string ["Red           Blue"] fontStyle FontStyle {size 1.125 family "SANS" horizontal TRUE justify "MIDDLE" leftToRight TRUE spacing 1.0 style "BOLD" topToBottom  TRUE}}}
}
Transform{translation 0 -2.25 .5
children Shape{
appearance Appearance{}
geometry DEF scores Text{string ["0      0"] fontStyle FontStyle {size 2.5 family "SANS" horizontal TRUE justify "MIDDLE" leftToRight TRUE spacing 1.0 style "BOLD" topToBottom  TRUE}}
}}
Transform{translation -8 -3.5 .5 children[
Shape{
appearance Appearance{material Material{diffuseColor 1 0 0}}
geometry Sphere{radius .5}
}
DEF resetButton TouchSensor{}
Shape{
appearance Appearance{material Material{diffuseColor 1 0 0}}
geometry Text{string ["   Reset Score"] fontStyle FontStyle {size .5 family "SANS" horizontal TRUE justify "LEFT" leftToRight TRUE spacing 1.0 style "BOLD" topToBottom  TRUE}}
}
]}
DEF scoreBoardScript Script{
eventIn SFVec2f set_score
eventIn SFBool reset
eventOut SFVec2f score_received
eventOut MFString score_changed
eventOut SFTime scoreTime_changed
url"vrmlscript:
function set_score(v,t){
  scoreTime_changed = t;
  scoreString = v[0]+'      '+v[1];
  score_received = v;
  score_changed = new MFString(scoreString);
}
function reset(v,t){
 if(!v){return;}
 score_received = new SFVec2f(0,0);
 scoreString = '0      0';
 score_changed = new MFString(scoreString);
}
"}
]}#END ScoreBoard
Sound {intensity 1 direction 1 1 1 maxBack 1000 maxFront 1000 minBack 10 minFront 10 spatialize FALSE source DEF scoreSound AudioClip {pitch 1 loop FALSE url "sounds/app.wav"}}
]}#END Group1
Group{}
]}#END LOD

DEF BGProx ProximitySensor{size 200 50 600 center -60 0 60}
]}#end Island Positioning Transform
DEF BGGroup Group{}
DEF BGadd Script{
eventIn SFBool set_isActive
field SFNode BGstopPosition USE BGstopPosition
field SFNode BGthrow USE BGthrow
field SFNode BGname USE BGname
field SFNode BGdrop USE BGdrop
field SFNode BGscore USE BGscore
field SFNode scoreBoardScript USE scoreBoardScript
field SFNode BGreset USE BGreset
field MFNode BG []
field SFNode BGGroup USE BGGroup
url"vrmlscript:
function set_isActive(v,t){
if(!v){
 if(BG != null){ 
  BGGroup.removeChildren = BG;
  Browser.deleteRoute(BG,'throw_changed',BGthrow,'set_rotation');
  Browser.deleteRoute(BGthrow,'rotation_changed',BG,'set_throw');
  Browser.deleteRoute(BG,'whoGotBall_changed',BGname,'set_string'); 
  Browser.deleteRoute(BGname,'string_changed',BG,'set_whoGotBall');
  Browser.deleteRoute(BG,'dropBall_changed',BGdrop,'set_bool'); 
  Browser.deleteRoute(BGdrop,'bool_changed',BG,'set_dropBall');
  Browser.deleteRoute(BG,'score_changed',BGscore,'set_vec2f');
  Browser.deleteRoute(scoreBoardScript,'score_received',BG,'set_score');
 }
 else{return;}
}
else{
 thisString = 'DEF BG BallGame{position 370 0 30}';
 BG = Browser.createVrmlFromString(thisString);
 BGGroup.addChildren = BG;
 Browser.addRoute(BG,'throw_changed',BGthrow,'set_rotation');
 Browser.addRoute(BGthrow,'rotation_changed',BG,'set_throw');
 Browser.addRoute(BG,'whoGotBall_changed',BGname,'set_string');
 Browser.addRoute(BGname,'string_changed',BG,'set_whoGotBall');
 Browser.addRoute(BG,'dropBall_changed',BGdrop,'set_bool'); 
 Browser.addRoute(BGdrop,'bool_changed',BG,'set_dropBall');
 Browser.addRoute(BG,'score_changed',BGscore,'set_vec2f');
 Browser.addRoute(scoreBoardScript,'score_received',BG,'set_score'); 
}
}
"}
ROUTE BGProx.isActive TO BGadd.set_isActive
ROUTE BGscore.vec2f_changed TO scoreBoardScript.set_score
ROUTE resetButton.isActive TO BGreset.set_bool
ROUTE BGreset.bool_changed TO scoreBoardScript.reset 
ROUTE scoreBoardScript.score_changed TO scores.set_string
ROUTE scoreBoardScript.scoreTime_changed TO scoreSound.set_startTime
#END BALLGAME ISLAND



#BEGIN ___ ISLAND
Transform{ translation -50 10 -187 rotation 0 1 0 1.571 children Bridge{ position 0 0 0 rotation 0 0 1 .1 scale 1 1 1 }}
Transform{
translation -50 20 -325
children[
Island{
crossSection [
#7.2 -40.14,-34.02 .18,-19.8 40.14,14.76 40.14,34.02 22.14,23.04 3.6,32.4 -18.18,7.2 -40.14
15 -40,
-30 -35,
-35 30,
-15 60,
14.76 40,
24.02 12,
32.4 -18.18,
7.2 -40
]
}
Transform{translation -7.5 0 -15 children Tent{}}
Transform{translation -0 0 -15 children Tree{}}
Transform{translation -15 0 0 children Tree{}}
Transform{translation 10 0 15 children Tree{}}
Transform{translation -15 0 -5 rotation 0 1 0 1.571 children ParkBench{}}
]}
#END___ISLAND

DEF sky Background{
skyColor[0 0 1,0 .5 1,1 1 1]
skyAngle[1.309,1.571]
groundColor[0 0 0,0 0 0,.0 .8 .05]
groundAngle[1.53,1.56]
}







